<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="patentsview">
<title>API Changes • patentsview</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="API Changes">
<meta property="og:description" content="patentsview">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">patentsview</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--api-changes">
    <span class="fa fa-flag"></span>
     
    API Changes
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--api-changes">
    <a class="dropdown-item" href="../articles/api-changes.html">
      <span class="fa fa-exclamation"></span>
       
      2024 API Changes
    </a>
    <a class="dropdown-item" href="../articles/converting-an-existing-script.html">
      <span class="fa fa-sync"></span>
       
      Converting an Existing Script
    </a>
    <a class="dropdown-item" href="../articles/result-set-paging.html">
      <span class="fa fa-book"></span>
       
      Result Set Paging
    </a>
    <a class="dropdown-item" href="../articles/understanding-the-api.html">
      <span class="fa fa-school"></span>
       
      Understanding the API
    </a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/getting-started.html">
    <span class="fa fa-play"></span>
     
    Getting started
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/writing-queries.html">
    <span class="fa fa-pencil"></span>
     
    Writing queries
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--applications">
    <span class="fa fa-bar-chart"></span>
     
    Applications
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--applications">
    <a class="dropdown-item" href="../articles/examples.html">
      <span class="fa fa-code"></span>
       
      Examples
    </a>
    <a class="dropdown-item" href="../articles/top-assignees.html">
      <span class="fa fa-university"></span>
       
      Top assignees
    </a>
    <a class="dropdown-item" href="../articles/citation-networks.html">
      <span class="fa fa-long-arrow-left"></span>
       
      Citation networks
    </a>
    <a class="dropdown-item" href="../articles/ropensci-blog-post.html">
      <span class="fa fa-bullhorn"></span>
       
      ropensci announcement
    </a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/patentsview/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>API Changes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/patentsview/blob/HEAD/vignettes/api-changes.Rmd" class="external-link"><code>vignettes/api-changes.Rmd</code></a></small>
      <div class="d-none name"><code>api-changes.Rmd</code></div>
    </div>

    
    
<p>In July of 2021 the Patentsview API team announced <a href="https://patentsview.org/data-in-action/whats-new-patentsview-july-2021" class="external-link">upcoming
API changes</a>. This page will explain the necessary changes and
additions to the R package. Note that these are <strong>breaking
changes</strong>, existing scripts will no longer run as-is using the
the new version of the R package which uses the new version of the API.
As noted below, the new version of the R package handles some of the
changes for users.</p>
<p>One change to note, the API team changed the name of the API.
PatentsView’s Search API is now the PatentSearch API, as announced <a href="https://search.patentsview.org/docs/#naming-update" class="external-link">here</a>. The
R package will retain its name, continue to use
<code><a href="https://docs.ropensci.org/patentsview/index.html">library(patentsview)</a></code> as before.</p>
<div class="section level2">
<h2 id="summary-of-pertinent-api-changes">Summary of Pertinent API Changes<a class="anchor" aria-label="anchor" href="#summary-of-pertinent-api-changes"></a>
</h2>
<p>Listed here are the API changes that matter to users of the original
version of the R package (which used the original version of the API).
Toward the bottom of this page are additional API changes what would
only matter if you called the API directly or wanted to write a python
library for the API.</p>
<ul>
<li><p>Probably most importantly, the current shutdown date for the
original version of the API is February 12, 2025, as communicated in the
August 2024 newsletter.</p></li>
<li><p>An <a href="#api-key-required">API key</a> is now
required.</p></li>
<li>
<p>All fields can be queried now and there is seemingly <a href="#operators">no distinction</a> between using string and full text
operators now, with a new <a href="#case-sensitivity-caveat">case
sensitivity caveat</a> though. Note that now some fields are returned in
nested objects and would need to be fully qualified in the query
parameter. Ex.
<code>search_pv(qry_funs$begins(cpc_current.cpc_group_id="A01B1/00"))</code></p>
<p>In the fields parameter, nested fields can be fully qualified or a
new API shorthand can be used, where group names can specified. When
group names are used, all of the group’s nested fields will be returned
by the API. Ex. the new version of the API and R package will accept
fields=c(“assignees”) when using the patent endpoint and all nested
assignees fields will be returned by the API. This would be similar to
<code>get_fields("patent", groups=c("assignees"))</code> except that
it’s the API deciding what fields to return (in this case, all of the
assignees fields).</p>
</li>
<li><p><a name="unbounded"> A result set’s size seems unbounded now, you
can now retrieve more than 100,000 rows. You’d need to be careful when
setting all_pages = TRUE as the R package will page until the entire
result set is retrieved which could be a million or more rows. Note that
in the previous version of the API total_hits was capped at 100,000
rows.</a></p></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/patentsview/index.html">patentsview</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="st">'{"patent_type":"utility"}'</span>, all_pages <span class="op">=</span> <span class="cn">FALSE</span> <span class="op">)</span></span>
<span><span class="co">#&gt; $data</span></span>
<span><span class="co">#&gt; #### A list with a single data frame on patents level:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ patents:'data.frame': 1000 obs. of  1 variable:</span></span>
<span><span class="co">#&gt;   ..$ patent_id: chr [1:1000] "10631087" ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $query_results</span></span>
<span><span class="co">#&gt; #### Distinct entity counts across all downloadable pages of output:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; total_hits = 8,123,346</span></span></code></pre></div>
<ul>
<li>
<p>Endpoint Changes</p>
<ul>
<li>nber_subcategories went away- it was an endpoint in the original
version of the API</li>
<li>Endpoints are now singular, ex. patent not patents. The returned
entities are still plural for the most part.</li>
<li>Now there are <a href="#endpoints">27 endpoints</a>, up from the
original 7  </li>
</ul>
</li>
<li>
<p>Comparison of the old and new attributes that can be sent to the
API in its o: (options) parameter via search_pv(). Note that the old
parameters are now deprecated.</p>
<table class="table">
<colgroup>
<col width="38%">
<col width="35%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th>Original API</th>
<th>New Version</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>per_page (max 10,000)</td>
<td>size (max 1,000)</td>
<td>maximum number of rows to return on each request</td>
</tr>
<tr class="even">
<td>page</td>
<td>after</td>
<td>page through large result sets</td>
</tr>
<tr class="odd">
<td>subent_cnts</td>
<td></td>
<td>whether the query results should include the total counts of unique
subentities</td>
</tr>
<tr class="even">
<td>mtchd_subent_only</td>
<td></td>
<td>whether a query should return all related subentities or just those
that match query criteria.</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="additional-r-package-changes">Additional R Package Changes <a name="r-package-changes"></a><a class="anchor" aria-label="anchor" href="#additional-r-package-changes"></a>
</h2>
<p>These changes were also made to the R package, in addition to the <a href="#summary-of-the-api-changes">API changes</a> outlined above and
the <a href="#other-api-changes">Other API Changes</a> below</p>
<ul>
<li><p>The R package changed internally from using httr to httr2. This
only affects users if they passed additional arguments (…) to
search_pv(). Previously if they passed config = httr::timeout(40) they’d
now pass timeout = 40 (name-value pairs of valid curl options, as found
in curl::curl_options() see <a href="https://httr2.r-lib.org/reference/req_options.html" class="external-link">req_options</a>)</p></li>
<li><p>Now that the R package is using httr2, users can make use of its
last_request() method to see what was sent to the API. This could be
useful when trying to fix an invalid request. Also fun would be seeing
the raw API response. The R package sets the after parameter and changes
the sort sent to the API, so viewing the last_request() after calling
search_pv with all_pages = TRUE might not be what you’d expect. There is
more about this <a href="result-set-paging.html">here</a>.</p></li>
</ul>
<pre><code><span><span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/last_response.html" class="external-link">last_request</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/last_response.html" class="external-link">last_response</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/last_response.html" class="external-link">last_response</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/resp_body_raw.html" class="external-link">resp_body_json</a></span><span class="op">(</span><span class="op">)</span> </span></code></pre>
<ul>
<li>Two methods were added
<ul>
<li>HATEOAS and sample links can be retrieved using <a href="#HATEOAS">retrieve_linked_data()</a>
</li>
<li>In custom paging involving patent_id, its value needs to be padded
with zeroes, see <code><a href="../reference/pad_patent_id.html">pad_patent_id()</a></code>
</li>
</ul>
</li>
<li>The ropensci blog post that announced the original version of the R
package was <a href="ropensci-blog-post.html">reworked</a> to use the
new version of the R package and API</li>
</ul>
</div>
<div class="section level2">
<h2 id="swagger-ui-page">Swagger UI Page <a name="swagger-ui-page"></a><a class="anchor" aria-label="anchor" href="#swagger-ui-page"></a>
</h2>
<p>The Patentsview API team has provided a Swagger UI page for the new
version of the API at <a href="https://search.patentsview.org/swagger-ui/" class="external-link uri">https://search.patentsview.org/swagger-ui/</a>. How cool is
that? Think of it as an online version of Postman already loaded with
the API’s endpoints and returns. Each field listed in the 200 response
sections could be requested in the fields parameter and each field is
supposed to be queryable (usable in the query parameter). The Swagger UI
page can be used to make requests, if you have an API key to enter in
the authorization screen. The Swagger UI definition at <a href="https://search.patentsview.org/static/openapi.json" class="external-link uri">https://search.patentsview.org/static/openapi.json</a> can
be imported into Postman to give you a nicely loaded collection for the
new version of the API. You’ll just need to set a global variable
PVIEW_KEY and set the authorization’s value to {{PVIEW_KEY}} to your API
key.</p>
</div>
<div class="section level2">
<h2 id="other-api-changes">Other API Changes <a name="other-api-changes"></a><a class="anchor" aria-label="anchor" href="#other-api-changes"></a>
</h2>
<p>These API changes would only matter if you want to call the API
directly or want to write a python library for the API etc. Or maybe
you’re on the receiving end of a PR and need to know about all of the
API’s changes.</p>
<ul>
<li><p>These options parameters went away: matched_subentities_only,
subent_cnts, per_page and page (paging now uses <code>after</code>
instead of <code>page</code> and <code>size</code> instead of
<code>per_page</code>)</p></li>
<li><p>Now the API’s response is always JSON. The original version of
the API had a ‘format’ parameter that defaulted to json but could be set
to xml. The original R package did not expose this parameter so your
script won’t know the difference (unless you were calling the API
directly).</p></li>
<li>
<p>Changes the updated R package handles for users:</p>
<ul>
<li>The API now <a href="#throttling">throttles requests</a>. The R
package retries throttled requests.</li>
<li>The API’s <a href="#a-note-on-paging">paging</a> is completely
different, but to users, all_pages=TRUE still works the same (however,
note the possibly unbounded result set size mentioned above).</li>
<li>The API change says that POST requests will need to send JSON data
(instead of string representation of JSON). A Content-Type:
application/json header was added.</li>
<li>The subdomain of the API changed from <a href="https://api.patentsview.org/" class="external-link uri">https://api.patentsview.org/</a> to <a href="https://search.patentsview.org" class="external-link uri">https://search.patentsview.org</a> and the paths to the
endpoints changed.<br>
</li>
<li>The order the fields are returned by the API has changed</li>
</ul>
<pre><code>  # Response body now
  {
    "error": false,
    "count": 1,
    "total_hits": 1,
    "patent": [...]
  }

  # Original response

  {
    "patents": [...],
    "count": 1,
    "total_patent_count": 1
  }</code></pre>
<p>Note that now total_hits comes back from all endpoints, previously
there was an endpoint specific count, like total_patent_count. Again,
all of this is handled for you by the R package. The way total_hits
comes back from the R package remains unchanged.</p>
</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>   <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="st">'{"patent_id": "11530080"}'</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span> <span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">query_results</span><span class="op">$</span><span class="va">total_hits</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="details-of-the-api-changes">Details of the API changes<a class="anchor" aria-label="anchor" href="#details-of-the-api-changes"></a>
</h2>
<div class="section level3">
<h3 id="an-api-key-is-required">An API Key is required <a name="api-key-required"></a><a class="anchor" aria-label="anchor" href="#an-api-key-is-required"></a>
</h3>
<p>Perhaps the most important change, without an API key your queries
will be rejected. Request an API key using this link: <a href="https://patentsview-support.atlassian.net/servicedesk/customer/portals" class="external-link uri">https://patentsview-support.atlassian.net/servicedesk/customer/portals</a>
Once you have one, you’ll need to set an environmental variable
PATENTSVIEW_API_KEY to the value of your API key for the R package to
use.</p>
<p>The user’s API key needs to be sent on all requests</p>
<pre><code><span><span class="va">api_key</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"PATENTSVIEW_API_KEY"</span><span class="op">)</span></span>
<span><span class="fu">httr</span><span class="fu">::</span><span class="fu"><a href="https://httr.r-lib.org/reference/add_headers.html" class="external-link">add_headers</a></span><span class="op">(</span><span class="st">"X-Api-Key"</span> <span class="op">=</span> <span class="va">api_key</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="endpoints">Endpoints <a name="endpoints"></a><a class="anchor" aria-label="anchor" href="#endpoints"></a>
</h3>
<p>Now there are 27 endpoints, up from the original 7, and each returns
a smaller, more specific data structure pertinent to that endpoint. As
an example, previously the inventor endpoint could return assignee
information, it no longer does that. The exception is the patent
endpoint. It now can return assignees, inventors, cpc_current along with
patent specific fields. Note that some new endpoints are nested under
patent/ and one is under publication/</p>
<ol style="list-style-type: decimal">
<li>There are 19 totally new endpoints
<ul>
<li>/api/v1/g_brf_sum_text/</li>
<li>/api/v1/g_claim/</li>
<li>/api/v1/g_detail_desc_text/</li>
<li>/api/v1/g_draw_desc_text/</li>
<li>/api/v1/pg_brf_sum_text/</li>
<li>/api/v1/pg_claim/</li>
<li>/api/v1/pg_detail_desc_text/</li>
<li>/api/v1/pg_draw_desc_text/</li>
<li>/api/v1/ipc/</li>
<li>/api/v1/uspc_subclass/</li>
<li>/api/v1/patent/attorney/</li>
<li>/api/v1/patent/foreign_citation/</li>
<li>/api/v1/patent/otherreference/ (not currently working)</li>
<li>/api/v1/patent/rel_app_text/</li>
<li>/api/v1/patent/us_application_citation/</li>
<li>/api/v1/patent/us_patent_citation/</li>
<li>/api/v1/publication/rel_app_text/</li>
<li>/api/v1/publications/</li>
<li>/api/v1/wipo/</li>
</ul>
</li>
<li>Five of the original API’s endpoints now have singular names but
lighter responses and fewer queryable fields as mentioned above.
<ul>
<li>/api/v1/assignee/</li>
<li>/api/v1/inventor/</li>
<li>/api/v1/location/</li>
<li>/api/v1/patent/</li>
<li>/api/v1/uspc_mainclass/</li>
</ul>
</li>
<li>The original CPC endpoint has a new name and there are two new CPC
endpoints
<ul>
<li>/api/v1/cpc_class/</li>
<li>/api/v1/cpc_subclass/</li>
<li>/api/v1/cpc_group/</li>
</ul>
</li>
<li>The nber_subcategory endpoint seems to be gone now.</li>
</ol>
<div class="section level4">
<h4 id="things-to-note">Things to note <a name="things-to-note"></a><a class="anchor" aria-label="anchor" href="#things-to-note"></a>
</h4>
<ol style="list-style-type: decimal">
<li><p>Currently some endpoints do not return all the attributes listed
in the API’s OpenAPI object. Some throw 500 errors when requested<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Observation sent to the API team.&lt;/p&gt;"><sup>1</sup></a> (see
test-api-bugs.R)</p></li>
<li><p>There are two rel_app_text endpoints, one under patent/ and one
under publication/ They both return entities named rel_app_texts but
they are slightly different, patent_id in the former and document_number
in the latter. The only other field in both is related_text.</p></li>
<li><p>Some endpoints now return <a href="#HATEOAS">HATEOAS
links</a></p></li>
<li><p>Some fields went away, like rawinventor_first_name and
rawinventor_last_name, and some have new names, most significantly,
patent_number is now patent_id. Requesting patent_number will result in
an error being thrown. Note also that the CPC related fields have new
names, see the next section.</p></li>
<li>
<p><a name="text_endpoints">On</a> the <a href="https://search.patentsview.org/swagger-ui/" class="external-link">Swagger UI page</a>
before the 2024-10-06 API release, there were four endpoints listed
under “Patent Text” with a link that showed how far back the data went
<a href="https://search.patentsview.org/docs/docs/Search%20API/TextEndpointStatus" class="external-link uri">https://search.patentsview.org/docs/docs/Search%20API/TextEndpointStatus</a>
Now there are eight endpoints. There are still four grant endpoints
(with a g_ prepended to the names originally released) listed under
“Patent Text” but now there are four more pre-grant (pg_) endpoints
listed under “Publication Text”.</p>
<p>It looks like the TextEndpointStatus page isn’t being updated, so
we’ll check one pair for ourselves. patent_date isn’t available from
g_brf_sum_text so we’ll ask the patent endpoint for it once we have the
smallest patent_id from g_brf_sum_text.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qry</span> <span class="op">&lt;-</span> <span class="va">qry_funs</span><span class="op">$</span><span class="fu">ne</span><span class="op">(</span>patent_id <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span><span class="va">sort</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"patent_id"</span> <span class="op">=</span> <span class="st">"asc"</span><span class="op">)</span></span>
<span><span class="va">grant</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">qry</span>, sort <span class="op">=</span> <span class="va">sort</span>, endpoint <span class="op">=</span> <span class="st">"g_brf_sum_text"</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">qry_funs</span><span class="op">$</span><span class="fu">eq</span><span class="op">(</span>patent_id <span class="op">=</span> <span class="va">grant</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">g_brf_sum_texts</span><span class="op">$</span><span class="va">patent_id</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">res</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co">#&gt; #### A list with a single data frame on patents level:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ patents:'data.frame': 1 obs. of  1 variable:</span></span>
<span><span class="co">#&gt;   ..$ patent_id: chr "11540434"</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qry</span> <span class="op">&lt;-</span> <span class="va">qry_funs</span><span class="op">$</span><span class="fu">gt</span><span class="op">(</span>document_number <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">sort</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"document_number"</span> <span class="op">=</span> <span class="st">"asc"</span><span class="op">)</span></span>
<span><span class="va">pre_grant</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">qry</span>, sort <span class="op">=</span> <span class="va">sort</span>, endpoint <span class="op">=</span> <span class="st">"pg_brf_sum_text"</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">pre_grant</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co">#&gt; #### A list with a single data frame on pg_brf_sum_texts level:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ pg_brf_sum_texts:'data.frame':    1 obs. of  1 variable:</span></span>
<span><span class="co">#&gt;   ..$ document_number: num 20230000001</span></span></code></pre></div>
<p>So, at this moment, both endpoints appear to have data going back to
2023.</p>
</li>
</ol>
</div>
</div>
<div class="section level3">
<h3 id="hateoas-links">HATEOAS Links <a name="HATEOAS"></a><a class="anchor" aria-label="anchor" href="#hateoas-links"></a>
</h3>
<p>Some of the returned fields are HATEOAS (Hypermedia as the Engine of
Application State) links to retrieve more information about that field.
Slightly funky is the cpc_current’s cpc_group, returned by the patent
endpoint. Here the slash in the CPC is turned into a colon. This is a
peculiarity of two of the new convenience URLs (new endpoints that
accept a single URL parameter) that shouldn’t be noticeable in the R
package, unless you are trying to infer the USPC and CPC values from the
returned URLs, without actually calling back for this data. See
<code><a href="../reference/retrieve_linked_data.html">retrieve_linked_data()</a></code></p>
<p>Here we’ll call the patent endpoint to get CPC fields for a
particular patent, some of the returned fields, like the cpc_group, are
HATEOAS links:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span>  <span class="va">query</span> <span class="op">&lt;-</span> <span class="st">'{"patent_id": "11530080"}'</span></span>
<span>  <span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_fields.html">get_fields</a></span><span class="op">(</span><span class="st">'patent'</span>, groups <span class="op">=</span> <span class="st">'cpc_current'</span><span class="op">)</span></span>
<span>  <span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"patent_id"</span>, <span class="va">fields</span><span class="op">)</span></span>
<span>  <span class="va">fields</span></span>
<span><span class="co">#&gt;  [1] "patent_id"                   "cpc_current.cpc_class"      </span></span>
<span><span class="co">#&gt;  [3] "cpc_current.cpc_class_id"    "cpc_current.cpc_group"      </span></span>
<span><span class="co">#&gt;  [5] "cpc_current.cpc_group_id"    "cpc_current.cpc_section"    </span></span>
<span><span class="co">#&gt;  [7] "cpc_current.cpc_sequence"    "cpc_current.cpc_subclass"   </span></span>
<span><span class="co">#&gt;  [9] "cpc_current.cpc_subclass_id" "cpc_current.cpc_type"</span></span>
<span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">query</span>, fields<span class="op">=</span><span class="va">fields</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># As noted above, the CPC related fields aren't the same as they were in the</span></span>
<span>  <span class="co"># original version of the API.  Also note that not all requested fields were</span></span>
<span>  <span class="co"># returned and that _id-less, HATEOAS fields were returned.</span></span>
<span>  <span class="va">unnested</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/unnest_pv_data.html">unnest_pv_data</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span>  <span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">unnested</span><span class="op">$</span><span class="va">cpc_current</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">x</span>,<span class="st">': '</span>, <span class="va">unnested</span><span class="op">$</span><span class="va">cpc_current</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "patent_id: 11530080"</span></span>
<span><span class="co">#&gt; [1] "cpc_sequence: 0"</span></span>
<span><span class="co">#&gt; [1] "cpc_class: https://search.patentsview.org/api/v1/cpc_class/B65/"</span></span>
<span><span class="co">#&gt; [1] "cpc_class_id: B65"</span></span>
<span><span class="co">#&gt; [1] "cpc_subclass: https://search.patentsview.org/api/v1/cpc_subclass/B65D/"</span></span>
<span><span class="co">#&gt; [1] "cpc_subclass_id: B65D"</span></span>
<span><span class="co">#&gt; [1] "cpc_group: https://search.patentsview.org/api/v1/cpc_group/B65D71:0033/"</span></span>
<span><span class="co">#&gt; [1] "cpc_group_id: B65D71/0033"</span></span></code></pre></div>
<p>Note that going to these links in a browser will result in a 403
Unauthorized, as no API key is sent. Also note the last two lines of
output, <code>"cpc_group_id: B65D71/0033"</code> (normal/expected) and
<code>"cpc_group: https://search.patentsview.org/api/v1/cpc_group/B65D71:0033/"</code>
(slightly odd use of a colon).</p>
<p>There is a new method in the R package to retrieve data from the
HATEOAS links, just pass the returned link and the R package will
retrieve the data for you. You can also pass an arbitrary link that hits
the API. This can be particularly useful if you want to see what the
response would be from a link found in the <a href="https://search.patentsview.org/docs/docs/Search%20API/SearchAPIReference/" class="external-link">API’s
documentation</a>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/patentsview/index.html">patentsview</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">pv_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/retrieve_linked_data.html">retrieve_linked_data</a></span><span class="op">(</span><span class="st">"https://search.patentsview.org/api/v1/cpc_group/G01S7:4865/"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">pv_data</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ cpc_groups:'data.frame':  1 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;   ..$ cpc_class      : chr "https://search.patentsview.org/api/v1/cpc_class/G01/"</span></span>
<span><span class="co">#&gt;   ..$ cpc_subclass   : chr "https://search.patentsview.org/api/v1/cpc_subclass/G01S/"</span></span>
<span><span class="co">#&gt;   ..$ cpc_group_id   : chr "G01S7/4865"</span></span>
<span><span class="co">#&gt;   ..$ cpc_group_title: chr "Details of systems according to groups G01S13/00, G01S15/00, G01S17/00-of systems according to group G01S17/00-"| __truncated__</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:2] "list" "pv_data_result"</span></span>
<span></span>
<span><span class="co"># Here we'll use an example URL from the documentation</span></span>
<span><span class="co"># Note that going to that link in a browser will result in a 403 Unauthorized, as no API key is sent.</span></span>
<span><span class="fu"><a href="../reference/retrieve_linked_data.html">retrieve_linked_data</a></span><span class="op">(</span><span class="st">'https://search.patentsview.org/api/v1/patent/?q={"patent_id":"7861317"}'</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `httr2::req_perform()`:</span></span>
<span><span class="co">#&gt; ! HTTP 400 Bad Request.</span></span>
<span><span class="co">#&gt; • Invalid JSON in 'q' parameter</span></span></code></pre></div>
<p>Note that when calling the cpc_group endpoint instead of using the
HATEOAS link, you’d use a slash instead of a colon.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="st">'{"cpc_group_id": "A01B1/00"}'</span>, endpoint <span class="op">=</span> <span class="st">'cpc_group'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ cpc_groups:'data.frame':  1 obs. of  1 variable:</span></span>
<span><span class="co">#&gt;   ..$ cpc_group_id: chr "A01B1/00"</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:2] "list" "pv_data_result"</span></span></code></pre></div>
<p><a name="slight-weirdness">Slight weirdness</a>/sleight of hand where
the returned field name loses the _id of the requested field</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># We'll make a call to the patent endpoint to get inventor and assignee HATEOAS links</span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="st">'{"patent_id":"10000000"}'</span>,</span>
<span>    fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"inventors.inventor_id"</span>, <span class="st">"assignees.assignee_id"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Error: Bad field(s): inventors.inventor_id, assignees.assignee_id</span></span>
<span></span>
<span>  <span class="co"># but note that the fields came back without the _id</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">patents</span><span class="op">$</span><span class="va">assignees</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">assignee</span><span class="op">)</span> <span class="co"># not $assignee_id as requested</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">patents</span><span class="op">$</span><span class="va">inventors</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">inventor</span><span class="op">)</span> <span class="co"># not $inventor_id as requested</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="api-throttling">API Throttling <a name="throttling"></a><a class="anchor" aria-label="anchor" href="#api-throttling"></a>
</h3>
<p>The API will now allow 45 requests per minute, making more requests
will anger the API. It will send back an error code with a header
indicating how many seconds to wait before sending more queries. The R
package will take care of this for you. It will sleep for the required
number of seconds before resubmitting your query, seamlessly to your
script.</p>
</div>
<div class="section level3">
<h3 id="a-note-on-paging">A Note on Paging <a name="a-note-on-paging"></a><a class="anchor" aria-label="anchor" href="#a-note-on-paging"></a>
</h3>
<p>The API team changed <a href="https://search.patentsview.org/docs/docs/Search%20API/SearchAPIReference/#pagination" class="external-link">how
paging works</a> and there is an important subtlety that the R package
handles for you. This screams for a python library so python users don’t
need to worry about this and throttling! Here’s a comment that used to
be in search-pv.R that tries to explain the danger.</p>
<pre><code><span>  <span class="co"># Here we ignore the user's sort and instead have the API sort by the primary</span></span>
<span>  <span class="co"># key and sometimes primary and secondary keys for the requested endpoint.  </span></span>
<span>  <span class="co"># This simplifies the paging's after parameter.</span></span>
<span>  <span class="co"># If we call the API with more than a primary sort, the after parameter would</span></span>
<span>  <span class="co"># have to be a vector of all the sort fields' last values.</span></span>
<span>  <span class="co"># After we've retrieved all the data we'll sort in R using the sort the user requested</span></span>
<span></span>
<span>  <span class="co"># Doing this also protects users from needing to know the peculiarities</span></span>
<span>  <span class="co"># of the API's paging.  Example: if a user requests a sort of</span></span>
<span>  <span class="co"># [{"patent_date":"asc"}], on paging the after parameter may skip</span></span>
<span>  <span class="co"># to the next issue date before having retured all the data for the last</span></span>
<span>  <span class="co"># patent_date in the previous request - depending on where the</span></span>
<span>  <span class="co"># patent_dates change relative to the API's page breaks.</span></span>
<span>  <span class="co"># (Say the last patent in a retrieved page is the first patent</span></span>
<span>  <span class="co"># of a particular date, we wouldn't want the after parameter to</span></span>
<span>  <span class="co"># to begin the next page of data 'after' this date.)</span></span></code></pre>
<p>See the new <a href="result-set-paging.html">Result Set Paging
vignette</a>.</p>
</div>
<div class="section level3">
<h3 id="string-and-full-text-operators">String and Full Text Operators <a name="operators"></a><a class="anchor" aria-label="anchor" href="#string-and-full-text-operators"></a>
</h3>
<p>The Tip below “Syntax” in the API’s <a href="https://search.patentsview.org/docs/docs/Search%20API/SearchAPIReference/#syntax" class="external-link">documentation</a>
says:</p>
<blockquote>
<p>When working with text data fields, wherever possible, we recommend
using _text* operators over the _contains and _begins operator. The text
operators treat these fields as full text data and hence are more
performant. The “full text” fields are identified in the API Endpoint
specification with the value “text” for the data type.</p>
</blockquote>
<p>Not sure if that only applies to the Patent Text and Publication Text
endpoints (listed at the top of the <a href="https://search.patentsview.org/swagger-ui/" class="external-link">Swagger UI page</a>)
or not. Also not sure what to make of the result set size differences<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Observation sent to the API team.&lt;/p&gt;"><sup>2</sup></a>,
total_hits, noting that no errors were thrown by the API:</p>
<p>hitting the patent endpoint:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query1</span> <span class="op">&lt;-</span> <span class="st">'{"_contains":{"patent_title":"dog"}}'</span></span>
<span><span class="va">query2</span> <span class="op">&lt;-</span> <span class="st">'{"_text_any":{"patent_title":"dog"}}'</span></span>
<span></span>
<span><span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">query1</span><span class="op">)</span></span>
<span><span class="co">#&gt; $data</span></span>
<span><span class="co">#&gt; #### A list with a single data frame on patents level:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ patents:'data.frame': 1000 obs. of  1 variable:</span></span>
<span><span class="co">#&gt;   ..$ patent_id: chr [1:1000] "10632101" ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $query_results</span></span>
<span><span class="co">#&gt; #### Distinct entity counts across all downloadable pages of output:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; total_hits = 3,706</span></span>
<span></span>
<span><span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">query2</span><span class="op">)</span></span>
<span><span class="co">#&gt; $data</span></span>
<span><span class="co">#&gt; #### A list with a single data frame on patents level:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ patents:'data.frame': 1000 obs. of  1 variable:</span></span>
<span><span class="co">#&gt;   ..$ patent_id: chr [1:1000] "D792527" ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $query_results</span></span>
<span><span class="co">#&gt; #### Distinct entity counts across all downloadable pages of output:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; total_hits = 2,115</span></span></code></pre></div>
<p>hitting the g_brf_sum_text endpoint:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query1</span> <span class="op">&lt;-</span> <span class="st">'{"_contains":{"summary_text":"paper cup holder"}}'</span></span>
<span><span class="va">query2</span> <span class="op">&lt;-</span> <span class="st">'{"_text_phrase":{"summary_text":"paper cup holder"}}'</span></span>
<span></span>
<span><span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">query1</span>, endpoint<span class="op">=</span><span class="st">"g_brf_sum_text"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $data</span></span>
<span><span class="co">#&gt; #### A list with a single data frame on g_brf_sum_texts level:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ g_brf_sum_texts: list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $query_results</span></span>
<span><span class="co">#&gt; #### Distinct entity counts across all downloadable pages of output:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; total_hits = 0</span></span>
<span></span>
<span><span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">query2</span>, endpoint<span class="op">=</span><span class="st">"g_brf_sum_text"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $data</span></span>
<span><span class="co">#&gt; #### A list with a single data frame on g_brf_sum_texts level:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ g_brf_sum_texts: list()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $query_results</span></span>
<span><span class="co">#&gt; #### Distinct entity counts across all downloadable pages of output:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; total_hits = 0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="case-sensitivity-caveat">Case Sensitivity Caveat <a name="case-sensitivity-caveat"></a><a class="anchor" aria-label="anchor" href="#case-sensitivity-caveat"></a>
</h3>
<p>The original version of the API seemed to be case insensitive. Not
sure if this is a bug or feature<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Observation sent to the API team.&lt;/p&gt;"><sup>3</sup></a> in the new version of the API but it’s
something to be aware of.</p>
<p>As you’ll see from the queries below, the two forms of equal now seem
to be case sensitive.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="st">'{"assignee_organization": "Johnson &amp; Johnson International"}'</span>, endpoint<span class="op">=</span><span class="st">"assignee"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span> <span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">query_results</span><span class="op">$</span><span class="va">total_hits</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="st">'{"assignee_organization": "johnson &amp; Johnson International"}'</span>, endpoint<span class="op">=</span><span class="st">"assignee"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span> <span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">query_results</span><span class="op">$</span><span class="va">total_hits</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="st">'{"_eq":{"assignee_organization": "Johnson &amp; Johnson International"}}'</span>, endpoint<span class="op">=</span><span class="st">"assignee"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span> <span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">query_results</span><span class="op">$</span><span class="va">total_hits</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="st">'{"_eq":{"assignee_organization": "johnson &amp; Johnson International"}}'</span>, endpoint<span class="op">=</span><span class="st">"assignee"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span> <span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">query_results</span><span class="op">$</span><span class="va">total_hits</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0</span></span></code></pre></div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Baker, Russ Allen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
