<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="patentsview">
<title>State of the API • patentsview</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="State of the API">
<meta property="og:description" content="patentsview">
<meta property="og:image" content="https://mustberuss.github.io/patentsview/index.html/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">patentsview</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--api-changes">
    <span class="fa fa-flag"></span>
     
    API Changes
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--api-changes">
    <a class="dropdown-item" href="../articles/api-changes.html">
      <span class="fa fa-exclamation"></span>
       
      2024 API Changes
    </a>
    <a class="dropdown-item" href="../articles/converting-an-existing-script.html">
      <span class="fa fa-sync"></span>
       
      Converting an Existing Script
    </a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/getting-started.html">
    <span class="fa fa-play"></span>
     
    Getting started
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/writing-queries.html">
    <span class="fa fa-pencil"></span>
     
    Writing queries
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--applications">
    <span class="fa fa-bar-chart"></span>
     
    Applications
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--applications">
    <a class="dropdown-item" href="../articles/examples.html">
      <span class="fa fa-code"></span>
       
      Examples
    </a>
    <a class="dropdown-item" href="../articles/top-assignees.html">
      <span class="fa fa-university"></span>
       
      Top assignees
    </a>
    <a class="dropdown-item" href="../articles/citation-networks.html">
      <span class="fa fa-long-arrow-left"></span>
       
      Citation networks
    </a>
    <a class="dropdown-item" href="../articles/ropensci_blog_post.html">
      <span class="fa fa-bullhorn"></span>
       
      ropensci announcement
    </a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/patentsview/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>State of the API</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/patentsview/blob/HEAD/vignettes/state-of-the-api.Rmd" class="external-link"><code>vignettes/state-of-the-api.Rmd</code></a></small>
      <div class="d-none name"><code>state-of-the-api.Rmd</code></div>
    </div>

    
    
<p>There’s a lot going on with the new version of Patentsview API,
recently renamed PatentSearch API, as announced <a href="https://search.patentsview.org/docs/#naming-update" class="external-link">here</a>.</p>
<div class="section level2">
<h2 id="key-points">Key Points<a class="anchor" aria-label="anchor" href="#key-points"></a>
</h2>
<ul>
<li><p>The original API’s sunset date is currently February 12, 2025
though the new version still has <a href="api-changes.html#things-to-note">issues</a></p></li>
<li><p>On a new <a href="api-changes.html#case-sensitivity-caveat">string case
sensitivity</a>, opened as a <a href="#case-dependent">bug</a>
below</p></li>
<li><p>On <a href="api-changes.html#string-and-full-text-operators">string vs full
text operators</a>. Note that there isn’t a way to distinguish strings
and full text fields in the OpenAPI object (limitation of the OpenAPI
spec). We may need to change the way fieldsdf is generated if we need to
track what operators can be used, possibly parsing the <a href="https://search.patentsview.org/docs/docs/Search%20API/SearchAPIReference/#endpoints" class="external-link">API’s
endpoints page</a></p></li>
<li><p>Interesting behavior mentioned in their jupyter notebook,
portions of it converted to <a href="understanding-the-api.html">a
vignette</a></p></li>
<li>
<p>API Oddities</p>
<ul>
<li><p>Some <a href="api-changes.html#slight-weirdness">requested
fields</a> ending with _id come back without the _id<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Observation sent to the API team but they might not see
it as a bug.&lt;/p&gt;"><sup>1</sup></a> Ex patent endpoint
requested inventors.inventor_id and assignees.assignee_id are returned
as inventors.inventor and assignees.assignee, their values are their
respective HATEOAS links</p></li>
<li>
<p>Two of the <a href="api-changes.html#hateoas-links">HATEOAS
links</a> use a colon instead of having two URL parameters</p>
<ul>
<li>https<a href=""></a>://search.patentsview.org/api/v1/cpc_group/G01S7:4865/</li>
<li>https<a href=""></a>://search.patentsview.org/api/v1/uspc_subclass/403:57/
(endpoint currently throws a 500)</li>
</ul>
<p>These links aren’t clickable since no API key would be sent,
resulting in a 403, Forbidden response.</p>
</li>
<li>
<p>Field inconsistencies</p>
<ul>
<li><p>There are two rule_47_flag fields, one returned by the patent
endpoint and one returned by the publication endpoint. The former is
returned as a boolean, the latter as a string that cast-pv-data casts to
a boolean.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Observation sent to the API team.&lt;/p&gt;"><sup>2</sup></a></p></li>
<li><p>assignee_type, available from three endpoints, is returned as a
string but looks like they’re integer values<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;There isn’t a data dictionary for the API so I suggested
they create one.&lt;/p&gt;"><sup>3</sup></a></p></li>
<li><p>Most document_number fields are integers but there are two that
are returned as strings that cast-pv-data casts to integers.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Observation sent to the API team.&lt;/p&gt;"><sup>4</sup></a> <a href="getting-started.html#casting-fields">Additional
details</a></p></li>
</ul>
</li>
<li>
<p>Most endpoints’ returns are the plural form of the singular
endpoint with these exceptions:</p>
<table class="table">
<thead><tr class="header">
<th>endpoint</th>
<th>returned entity</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>ipc</td>
<td>ipcr</td>
</tr>
<tr class="even">
<td>otherreference</td>
<td>other_references<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;To be fixed by the API team&lt;/p&gt;"><sup>5</sup></a>
</td>
</tr>
<tr class="odd">
<td>wipo</td>
<td>wipo</td>
</tr>
<tr class="even">
<td>publication/rel_app_text</td>
<td>rel_app_text_publications</td>
</tr>
</tbody>
</table>
<p>(Note that patent/rel_app_text returns rel_app_texts, following the
singular/plural pattern)</p>
</li>
</ul>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="on-the-plus-side">On the Plus Side<a class="anchor" aria-label="anchor" href="#on-the-plus-side"></a>
</h2>
<ul>
<li><p>All fields can be queried now.</p></li>
<li><p>A <a href="patentsview-breaking-change.html#online-documentation">Swagger
UI</a> page was created for the new version of the API</p></li>
<li><p>The 100,000 row result set limit seems to be gone. Might be part
curse as a user might not have intended to retrieve all utility patents
etc.</p></li>
<li>
<p>The new version of the API returns data in types other than
strings, e.g. application.rule_47_flag from the patent endpoint is a
boolean.
<code>View(fieldsdf[grep('number|integer|boolean',fieldsdf$data_type),c("endpoint","field","data_type")])</code>
currently returns 90 rows</p>
<p>There are still a few fields where the API returns strings that
cast-pv-data() casts to a more appropriate data type<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Observation sent to the API team.&lt;/p&gt;"><sup>6</sup></a>. fieldsdf$data_type is
set to int or bool for these fields.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mustberuss.github.io/patentsview/index.html">patentsview</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fieldsdf</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"bool$|int$"</span>, <span class="va">fieldsdf</span><span class="op">$</span><span class="va">data_type</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"endpoint"</span>, <span class="st">"field"</span>, <span class="st">"data_type"</span><span class="op">)</span><span class="op">]</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                        endpoint                    field data_type</span></span>
<span><span class="co">##                        assignee            assignee_type       int</span></span>
<span><span class="co">##                          patent  assignees.assignee_type       int</span></span>
<span><span class="co">##  patent/us_application_citation citation_document_number       int</span></span>
<span><span class="co">##                     publication  assignees.assignee_type       int</span></span>
<span><span class="co">##                     publication             rule_47_flag      bool</span></span>
<span><span class="co">##        publication/rel_app_text          document_number       int</span></span></code></pre>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="open-api-bugs">Open API Bugs<a class="anchor" aria-label="anchor" href="#open-api-bugs"></a>
</h2>
<p>Weirdly, you can only view bugs you’ve submitted. I’m assuming there
are other open bugs.</p>
<p>PVS-1147 <a name="case-dependent"><br>
Results are case dependent now when using an implied or explicit
equals</a></p>
<p>PVS-1125<br>
Not all the fields in the OpenAPI object can be requested</p>
<p>PVS-1109 <a name="otherreference"><br>
The otherreference endpoint rejects the default </a><a href="https://search.patentsview.org/swagger-ui/" class="external-link">Swagger UI</a>
parameters (throws a 400 Bad Request Error if either reference_sequence
or reference_text is requested) and returns no data when only patent_id
is requested. The OpenAPI object says the returned object is
other_references which is another exception to the singular
endpoint/plural return pattern<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;To be fixed by the API team&lt;/p&gt;"><sup>7</sup></a>.</p>
<p>PVS-1155<br>
Documentation inconsistencies<br>
The endpoint is listed as /api/v1/attorney/, it should be
/api/v1/patent/attorney for the GET/POST and
/api/v1/patent/attorney/{attorney_id}/ for the GET with a url parameter
The beta endpoints say they are only GETs. The Swagger UI page and
OpenAPI object say they accept posts too, which do work.</p>
</div>
<div class="section level2">
<h2 id="state-of-the-r-package">State of the R Package<a class="anchor" aria-label="anchor" href="#state-of-the-r-package"></a>
</h2>
<ul>
<li><p><a href="api-changes.html#additional-r-package-changes">Two new
methods</a> were added to the R package</p></li>
<li><p>The API and R package now allow nested attributes to be <a href="understanding-the-api.html#fields-shorthand">wildcarded</a>, where
the group’s name will retrieve all the group’s nested fields. An empty
string can also be passed as a group name to get_fields() which then
requests all the non-nested attributes from the endpoint. Ex.
<code>get_fields("patent", group=c("", "inventors")</code></p></li>
<li><p>The reworked <a href="ropensci_blog_post.html">ropensci post</a>
explains what changes had to be made since assignee latitude and
longitude are no longer available from the patent endpoint.</p></li>
<li>
<p>Some of the new endpoints are nested under patent/ and one is
nested under publication/</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">fieldsdf</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"/"</span>, <span class="va">fieldsdf</span><span class="op">$</span><span class="va">endpoint</span><span class="op">)</span>, <span class="st">"endpoint"</span><span class="op">]</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "patent/attorney"                "patent/foreign_citation"       </span></span>
<span><span class="co">## [3] "patent/otherreference"          "patent/rel_app_text"           </span></span>
<span><span class="co">## [5] "patent/us_application_citation" "patent/us_patent_citation"     </span></span>
<span><span class="co">## [7] "publication/rel_app_text"</span></span></code></pre>
</li>
<li>
<p>Package contributor specific changes</p>
<ul>
<li><p>My github repo is set to deliver to <a href="https://mustberuss.r-universe.dev/patentsview" class="external-link uri">https://mustberuss.r-universe.dev/patentsview</a> and can be
installed via
<code>install.packages('patentsview', repos = c('https://mustberuss.r-universe.dev'))</code></p></li>
<li><p>On the new <a href="api-changes.html#a-note-on-paging">implementation of paging</a>
and the <a href="https://github.com/ropensci/patentsview/pull/29#discussion_r1059153136" class="external-link">PR
discussion</a> on paging with more than a primary sort</p></li>
<li><p>The patent/otherreference endpoint isn’t currently working
(reported as a <a href="#otherreference">bug</a> above). It is included
in the return of get_endpoints() and has only a negative test case that
will fail when the API responds with something other than an
error.</p></li>
<li><p>The R package unit tests have some skips and other negative tests
that API bugs still exist (they’ll fail when bugs are fixed). The tests
were copied to <a href="https://github.com/mustberuss/patentsview/blob/api-redesign/tests/testthat/test-api-bugs.R" class="external-link">a
single file</a> that was then submitted to the API team as bugs. Most of
the tests exist in other test files but a few are unique (specific to
API bugs that won’t be needed once they’re fixed).</p></li>
<li>
<p>A possible <a href="patentsview-breaking-change.html">tech
note</a> for when the new package is ready mentions</p>
<blockquote>
<p>As shown in the updated <a href="top-assignees.html">Top Assignees
vignette</a>, there will be occasions now where multiple API calls are
needed to retrieve the same data as in a single API call in the original
version of the API and R package.</p>
</blockquote>
</li>
<li><p>The workflow (R-CMD-check.yaml) was updated to get rid of
deprecated warnings</p></li>
<li><p>Added vignettes/build_some.R to half render some of the
vignettes</p></li>
<li>
<p>Possible Package Improvements</p>
<ul>
<li>The version number ought to be bumped to 1.0.0 since there are
breaking API changes</li>
<li>Result set size seems unbounded now. Should we warn if a query would
return more than 100,000 rows with all_pages = TRUE?</li>
<li>Have get_fields() and search_pv() throw a specialized error if a
plural endpoint is passed</li>
<li>Replace openAPI_to_csv.pl and to_rda.R with its R equivalent</li>
<li>Add an issue template that warns users not to share their API
keys</li>
<li>Navigation on the vignettes could be better, <a href="understanding-the-api.html">understanding-the-api</a> isn’t a link
in the navigation yet, neither is the possible <a href="patentsview-breaking-change.html">tech note</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="worth-mentioning">Worth Mentioning<a class="anchor" aria-label="anchor" href="#worth-mentioning"></a>
</h2>
<p>bergant/rapiclient has a new maintainer and there is talk of adding
support for OpenAPI v3 <a href="https://github.com/bergant/rapiclient/issues/11" class="external-link uri">https://github.com/bergant/rapiclient/issues/11</a> The R
version (not currently working) of the fieldsdf creator uses rapiclient
but it’s expecting to read a Swagger/OpenAPI v2 object (the patentsview
object is OpenAPI v3).</p>
</div>
<div class="section level2">
<h2 id="findingscontributor-101">Findings/Contributor 101<a class="anchor" aria-label="anchor" href="#findingscontributor-101"></a>
</h2>
<p>Helpful info after you’ve forked <a href="https://github.com/ropensci/patentsview" class="external-link uri">https://github.com/ropensci/patentsview</a></p>
<ul>
<li>
<p>API related</p>
<ul>
<li><p>Updated versions of the new API are unannounced for the most
part, maybe on a three week release cycle, often on Saturdays. I do head
requests from time to time on the <a href="https://search.patentsview.org/static/openapi.json" class="external-link">API’s OpenAPI
object</a> to detect when its Last-Modified changes. When it changes, I
back up data-raw/fieldsdf.csv, run data-raw/openAPI_to_csv.pl and
compare the backed up fieldsdf.csv to the new one to see if anything
changed. I also run all of the tests to see what happens and push any
changes to keep the tests passing. Quarterly or so they’ll update <a href="https://patentsview.org/release-notes" class="external-link uri">https://patentsview.org/release-notes</a></p></li>
<li><p>Report API suggestions/bugs etc <a href="https://patentsview-support.atlassian.net/servicedesk/customer/portals" class="external-link">here</a>
or Community -&gt; Support using the nav on <a href="httsp://patentsview.org">patentsview.org</a></p></li>
<li><p>Now all the endpoints are documented on a <a href="https://search.patentsview.org/docs/docs/Search%20API/SearchAPIReference/#endpoints" class="external-link">single
page</a>. The <a href="https://search.patentsview.org/docs/docs/Search%20API/SearchAPIReference/#api-query-language" class="external-link">query
language</a> is also on that same page. Originally there was a separate
page for each endpoint.</p></li>
<li><p>The patentsview forum isn’t terribly active but it’s worth
keeping an eye on <a href="https://patentsview.org/forum" class="external-link uri">https://patentsview.org/forum</a></p></li>
</ul>
</li>
<li>
<p>Locally</p>
<ul>
<li><p>Build and install the local code
<code>devtools::install('.')</code></p></li>
<li>
<p>Local Testing</p>
<ul>
<li><p>devtools::test() to run all the tests in tests/testthat/</p></li>
<li><p>devtools::test(filter=“utils”) to just run just
test-utils.R</p></li>
<li><p>note that if you add new test methods, they must start with
<code>skip_on_cran()</code> or builds will fail on r-universe (see
Optional below) and eventually on CRAN.</p></li>
</ul>
</li>
<li>
<p>Half building vignettes locally - see vignettes/README.md</p>
<ul>
<li><p>need phantomjs in your path on windows at least</p></li>
<li><p>see the comments in vignettes/build_some.R</p></li>
</ul>
</li>
<li>
<p>pkgdown locally</p>
<ul>
<li><p>pkgdown::build_articles() to see local changes to half-rendered
vignettes</p></li>
<li>
<p>You may want to run individual methods or <a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">pkgdown::build_site()</a>
which is a wrapper for</p>
<ul>
<li>init_site()</li>
<li>build_home()</li>
<li>build_reference()</li>
<li>build_articles()</li>
<li>build_tutorials()</li>
<li>build_news()</li>
<li>build_redirects() <br><br>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>build reference pages locally<br>
If you make changes to method documentation, run</p>
<ul>
<li>devtools::document() and</li>
<li>pkgdown::build_reference()</li>
</ul>
</li>
<li>
<p>see README.Rmd changes locally</p>
<ul>
<li>knitr::knit(“README.Rmd”, “README.md”)</li>
<li>pkgdown::build_home() <br><br>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Remotely</p>
<ul>
<li><p>pkgdown remotely<br>
You can set up github pages in your repo to display vignettes and man
pages, e.g. <a href="https://github.com/mustberuss/patentsview" class="external-link uri">https://github.com/mustberuss/patentsview</a></p></li>
<li><p>Remote Testing<br>
You can put your API key in your repo as a Repository secret so the
tests will run when you push changes. E.g., I have PATENTSVIEW_API_KEY
set in <a href="https://github.com/mustberuss/patentsview/settings/secrets/actions" class="external-link uri">https://github.com/mustberuss/patentsview/settings/secrets/actions</a>
(though settings aren’t publicly viewable)</p></li>
</ul>
</li>
<li>
<p>Before doing a push</p>
<ul>
<li><p>make sure you are following the <a href="https://style.tidyverse.org/" class="external-link">Tidyverse style guide</a>. There are
plugins to keep you stylish
<code>styler::style_pkg(".", dry = "fail")</code>
<code>styler::style_file('path/file')</code> if necessary or use a
plugin etc</p></li>
<li><p>make sure the examples still run
<code><a href="https://devtools.r-lib.org/reference/run_examples.html" class="external-link">devtools::run_examples()</a></code></p></li>
<li><p>check spelling using
<code>devtools::spell_check(pkg = ".", vignettes = TRUE, use_wordlist = TRUE)</code>
Locally I have an unchecked in inst/WORDLIST with additional words to
allow (one word per line) see <a href="https://devtools.r-lib.org/reference/spell_check.html" class="external-link uri">https://devtools.r-lib.org/reference/spell_check.html</a></p></li>
</ul>
</li>
<li>
<p>Optional</p>
<ul>
<li>you can set up your own r-universe by creating a special github
repo, as explained <a href="https://ropensci.org/blog/2021/06/22/setup-runiverse/" class="external-link">here</a>.
E.g., <a href="https://github.com/mustberuss/mustberuss.r-universe.dev" class="external-link uri">https://github.com/mustberuss/mustberuss.r-universe.dev</a>
with <a href="https://github.com/mustberuss/mustberuss.r-universe.dev/blob/master/packages.json" class="external-link uri">https://github.com/mustberuss/mustberuss.r-universe.dev/blob/master/packages.json</a>
See <a href="https://ropensci.org/blog/2023/02/07/runiverse-registry-repo/" class="external-link">this
article</a> on the newer repo naming convention <br><br>
</li>
</ul>
</li>
<li>
<p>Notes</p>
<ul>
<li>By default, patentsview is on r-universe <a href="https://ropensci.r-universe.dev/patentsview" class="external-link uri">https://ropensci.r-universe.dev/patentsview</a> <br><br>
</li>
</ul>
</li>
<li>
<p>Questions:</p>
<ul>
<li><p>Is there a way to set up notifications on r-universe build
failures? If you miss a skip_on_cran(), tests could work in your repo
(if you have your API key as a repo secret) but the build will silently
fail on r-universe. Don’t ask how I know that.</p></li>
<li><p>Why don’t the vignettes show up on r-universe? The articles link
is grayed out.</p></li>
</ul>
</li>
</ul>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Baker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
