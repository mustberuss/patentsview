<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="patentsview">
<title>State of the API • patentsview</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="State of the API">
<meta property="og:description" content="patentsview">
<meta property="og:image" content="https://mustberuss.github.io/patentsview/index.html/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">patentsview</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--api-changes">
    <span class="fa fa-flag"></span>
     
    API Changes
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--api-changes">
    <a class="dropdown-item" href="../articles/api-changes.html">
      <span class="fa fa-exclamation"></span>
       
      2024 API Changes
    </a>
    <a class="dropdown-item" href="../articles/converting-an-existing-script.html">
      <span class="fa fa-sync"></span>
       
      Converting an Existing Script
    </a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/getting-started.html">
    <span class="fa fa-play"></span>
     
    Getting started
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/writing-queries.html">
    <span class="fa fa-pencil"></span>
     
    Writing queries
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--applications">
    <span class="fa fa-bar-chart"></span>
     
    Applications
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--applications">
    <a class="dropdown-item" href="../articles/examples.html">
      <span class="fa fa-code"></span>
       
      Examples
    </a>
    <a class="dropdown-item" href="../articles/top-assignees.html">
      <span class="fa fa-university"></span>
       
      Top assignees
    </a>
    <a class="dropdown-item" href="../articles/citation-networks.html">
      <span class="fa fa-long-arrow-left"></span>
       
      Citation networks
    </a>
    <a class="dropdown-item" href="../articles/ropensci_blog_post.html">
      <span class="fa fa-bullhorn"></span>
       
      ropensci announcement
    </a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/patentsview/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>State of the API</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/patentsview/blob/HEAD/vignettes/state-of-the-api.Rmd" class="external-link"><code>vignettes/state-of-the-api.Rmd</code></a></small>
      <div class="d-none name"><code>state-of-the-api.Rmd</code></div>
    </div>

    
    
<p>There’s a lot going on with the new version of Patentsview API,
recently renamed PatentSearch API, as announced <a href="https://search.patentsview.org/docs/#naming-update" class="external-link">here</a>. Here
are the key points:</p>
<ul>
<li><p>The original API’s sunset date is currently February 12, 2025
though the new version still has <a href="api-changes.html#things-to-note">issues</a></p></li>
<li><p>On a new <a href="api-changes.html#case-sensitivity-caveat">string case
sensitivity</a>, opened as a <a href="#case-dependent">bug</a>
below</p></li>
<li><p>On <a href="api-changes.html#string-and-full-text-operators">string vs full
text operators</a>. Note that there isn’t a way to distinguish strings
and full text fields in the OpenAPI object (limitation of the OpenAPI
spec). We may need to change the way fieldsdf is generated if we need to
track what operators can be used, possibly parsing the <a href="https://search.patentsview.org/docs/docs/Search%20API/SearchAPIReference/" class="external-link">API
page</a>?</p></li>
<li><p>Interesting behavior mentioned in their jupyter notebook,
portions of it converted to <a href="understanding-the-api.html">a
vignette</a></p></li>
<li>
<p>API Oddities</p>
<ul>
<li><p>Some <a href="api-changes.html#slight-weirdness">requested
fields</a> ending with _id come back without the _id<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Observation sent to the API team but they might not see
it as a bug.&lt;/p&gt;"><sup>1</sup></a> Ex patent endpoint
requested inventors.inventor_id and assignees.assignee_id are returned
as inventors.inventor and assignees.assignee, their values are their
respective HATEOAS links</p></li>
<li>
<p>Two of the <a href="api-changes.html#hateoas-links">HATEOAS
links</a> use a colon instead of having two URL parameters</p>
<ul>
<li>https<a href=""></a>://search.patentsview.org/api/v1/cpc_group/G01S7:4865/</li>
<li>https<a href=""></a>://search.patentsview.org/api/v1/uspc_subclass/403:57/
(endpoint currently throws a 500)</li>
</ul>
<p>These links aren’t clickable since no API key would be sent,
resulting in a 403, Forbidden response.</p>
</li>
<li>
<p>Field inconsistencies</p>
<ul>
<li><p>There are two rule_47_flag fields, one returned by the patent
endpoint and one returned by the publication endpoint. The former is
returned as a boolean, the latter as a string that cast-pv-data casts to
a boolean.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Observation sent to the API team.&lt;/p&gt;"><sup>2</sup></a></p></li>
<li><p>assignee_type, available from three endpoints, is returned as a
string but looks like they’re integer values<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;There isn’t a data dictionary for the API so I suggested
they create one.&lt;/p&gt;"><sup>3</sup></a></p></li>
<li><p>Most document_number fields are integers but there are two that
are returned as strings that cast-pv-data casts to integers.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Observation sent to the API team.&lt;/p&gt;"><sup>4</sup></a> <a href="getting-started.html#casting-fields">Additional
details</a></p></li>
</ul>
</li>
<li>
<p>Most endpoints’ returns are the plural form of the singular
endpoint with these exceptions:</p>
<table class="table">
<thead><tr class="header">
<th>endpoint</th>
<th>returned entity</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>ipc</td>
<td>ipcr</td>
</tr>
<tr class="even">
<td>otherreference</td>
<td>other_references<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;To be fixed by the API team&lt;/p&gt;"><sup>5</sup></a>
</td>
</tr>
<tr class="odd">
<td>wipo</td>
<td>wipo</td>
</tr>
<tr class="even">
<td>publication/rel_app_text</td>
<td>rel_app_text_publications</td>
</tr>
</tbody>
</table>
<p>(Note that patent/rel_app_text returns rel_app_texts, following the
singular/plural pattern)</p>
</li>
</ul>
</li>
</ul>
<div class="section level3">
<h3 id="on-the-plus-side">On the plus side<a class="anchor" aria-label="anchor" href="#on-the-plus-side"></a>
</h3>
<ul>
<li><p>All fields can be queried now.</p></li>
<li><p>A <a href="patentsview-breaking-change.html#online-documentation">Swagger
UI</a> page was created for the new version of the API</p></li>
<li><p>The 100,000 row result set limit seems to be gone. Might be part
curse as a user might not have intended to retrieve all utility patents
etc.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="state-of-the-r-package">State of the R Package<a class="anchor" aria-label="anchor" href="#state-of-the-r-package"></a>
</h2>
<ul>
<li><p>The patent/otherreference endpoint isn’t currently working
(reported as a <a href="#otherreference">bug</a> below). It is included
in the return of get_endpoints() and has only a negative test case that
will fail when the API responds with something other than an
error.</p></li>
<li><p>Some of the new endpoints are nested under patent/ and one is
nested under publication/</p></li>
</ul>
<pre><code>&gt; unique(fieldsdf[grep('/',fieldsdf$endpoint),"endpoint"])
[1] "patent/attorney"                "patent/foreign_citation"
[3] "patent/otherreference"          "patent/rel_app_text"
[5] "patent/us_application_citation" "patent/us_patent_citation"
[7] "publication/rel_app_text"</code></pre>
<ul>
<li><p><a href="api-changes.html#additional-r-package-changes">Two new
methods</a> were added to the R package</p></li>
<li><p>The API and R package now allow nested attributes to be <a href="understanding-the-api.html#fields-shorthand">wildcarded</a>, where
the group’s name will retrieve all the group’s nested fields. An empty
string can also be passed as a group name to get_fields() which then
requests all the non-nested attributes from the endpoint. Ex.
<code>get_fields("patent", group=c("", "inventors")</code></p></li>
<li><p>On the new <a href="api-changes.html#a-note-on-paging">implementation of paging</a>
and the <a href="https://github.com/ropensci/patentsview/pull/29#discussion_r1059153136" class="external-link">PR
discussion</a> on paging with more than a primary sort</p></li>
<li><p><a href="api-changes.html#possible-improvements">Possible
improvements</a></p></li>
<li>
<p>A possible <a href="patentsview-breaking-change.html">tech
note</a> mentions</p>
<blockquote>
<p>As shown in the updated <a href="top-assignees.html">Top Assignees
vignette</a>, there will be occasions now where multiple API calls are
needed to retrieve the same data as in a single API call in the original
version of the API and R package.</p>
</blockquote>
</li>
<li><p>The reworked <a href="ropensci_blog_post.html">ropensci post</a>
explains what changes had to be made since assignee latitude and
longitude are no longer available from the patent endpoint.</p></li>
<li><p>The R package unit tests have some skips and negative tests that
API bugs still exist (they’ll fail when bugs are fixed). The tests were
copied to <a href="https://github.com/mustberuss/patentsview/blob/api-redesign/tests/testthat/test-api-bugs.R" class="external-link">a
single file</a> that was then submitted to the API team as bugs. Most of
the tests exist in other test files but a few are unique (specific to
API bugs that won’t be needed once they’re fixed).</p></li>
<li><p>Navigation on the vignettes could be better, <a href="understanding-the-api.html">understanding-the-api</a> isn’t a link
in the navigation yet, neither is the possible tech note <a href="patentsview-breaking-change.html">patentsview-breaking-change</a></p></li>
</ul>
</div>
<div class="section level2">
<h2 id="bugs-ive-submitted">Bugs I’ve submitted<a class="anchor" aria-label="anchor" href="#bugs-ive-submitted"></a>
</h2>
<p>PVS-1147 <a name="case-dependent"><br>
Results are case dependent now when using an implied or explicit
equals</a></p>
<p>PVS-1125<br>
Not all the fields in the OpenAPI object can be requested</p>
<p>PVS-1109 <a name="otherreference"><br>
The otherreference endpoint rejects the default </a><a href="https://search.patentsview.org/swagger-ui/" class="external-link">Swagger UI</a>
parameters (throws a 400 Bad Request Error if either reference_sequence
or reference_text is requested) and returns no data when only patent_id
is requested. The returned object is supposed to be other_references
which is another exception to the singular endpoint/plural return
pattern.</p>
<p>PVS-1155<br>
Documentation inconsistencies<br>
The endpoint is listed as /api/v1/attorney/, it should be
/api/v1/patent/attorney for the GET/POST and
/api/v1/patent/attorney/{attorney_id}/ for the GET with a url parameter
The beta endpoints say they are only GETs. The Swagger UI page and
OpenAPI object say they accept posts too, which do work.</p>
</div>
<div class="section level2">
<h2 id="worth-mentioning">Worth Mentioning<a class="anchor" aria-label="anchor" href="#worth-mentioning"></a>
</h2>
<p>bergant/rapiclient has a new maintainer and there is talk of adding
support for OpenAPI v3 <a href="https://github.com/bergant/rapiclient/issues/11" class="external-link uri">https://github.com/bergant/rapiclient/issues/11</a> The R
version (not currently working) of the fieldsdf creator uses rapiclient
but it’s expecting to read a Swagger/OpenAPI v2 object (the patentsview
object is OpenAPI v3).</p>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Baker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
