<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="patentsview">
<title>Top assignees • patentsview</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Top assignees">
<meta property="og:description" content="patentsview">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">patentsview</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--api-changes">
    <span class="fa fa-flag"></span>
     
    API Changes
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--api-changes">
    <a class="dropdown-item" href="../articles/api-changes.html">
      <span class="fa fa-exclamation"></span>
       
      2025 API Changes
    </a>
    <a class="dropdown-item" href="../articles/converting-an-existing-script.html">
      <span class="fa fa-sync"></span>
       
      Converting an Existing Script
    </a>
    <a class="dropdown-item" href="../articles/result-set-paging.html">
      <span class="fa fa-book"></span>
       
      Result Set Paging
    </a>
    <a class="dropdown-item" href="../articles/understanding-the-api.html">
      <span class="fa fa-school"></span>
       
      Understanding the API
    </a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/getting-started.html">
    <span class="fa fa-play"></span>
     
    Getting started
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/writing-queries.html">
    <span class="fa fa-pencil"></span>
     
    Writing queries
  </a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--applications">
    <span class="fa fa-bar-chart"></span>
     
    Applications
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--applications">
    <a class="dropdown-item" href="../articles/examples.html">
      <span class="fa fa-code"></span>
       
      Examples
    </a>
    <a class="dropdown-item" href="../articles/top-assignees.html">
      <span class="fa fa-university"></span>
       
      Top assignees
    </a>
    <a class="dropdown-item" href="../articles/citation-networks.html">
      <span class="fa fa-long-arrow-left"></span>
       
      Citation networks
    </a>
    <a class="dropdown-item" href="../articles/ropensci-blog-post.html">
      <span class="fa fa-bullhorn"></span>
       
      ropensci announcement
    </a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/patentsview/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Top assignees</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/patentsview/blob/HEAD/vignettes/top-assignees.Rmd" class="external-link"><code>vignettes/top-assignees.Rmd</code></a></small>
      <div class="d-none name"><code>top-assignees.Rmd</code></div>
    </div>

    
    
<blockquote>
<p>Note about the effects of the <a href="api-changes.html">API
changes</a>.</p>
<p>This is a good example of life under the new version of the API,
where we have to make more than one call to get the same data as before.
This assumes that we have already received an API key and have set the
environmental variable (see the API Changes page). Maybe even keep the
old page around for comparison? For now the original Top Assignees page
is <a href="https://docs.ropensci.org/patentsview/articles/top-assignees.html" class="external-link">here</a>.</p>
<p>Intention:<br>
The original version of this page used the patent’s application date in
the plot below. In the new version of the API there is a patent_year
(the year the patent was granted, already of type integer) that we’ll
use. Trouble is that the count is nested inside the patents structure,
not inside the nested assignees. Fortunately both nested structures have
patent_id as a field so we can join them to get the data we need.</p>
<p>In the original version of this page we searched for database
(singular) but now that produces a result set of over 10,000 rows.
Instead, we’ll search for databases (plural) which will make our result
set smaller.</p>
<p>We start by calling the patent endpoint to get the patents where
“databases” is in the title or abstract and there is an assignee. We
make a subsequent call to the assignee endpoint to get
assignee_num_patents (total number of patents) for the top 75 assignees,
then we blend in the assignee_num_patents and compute the percentages.
Then life, and the script, goes on as normal (as the original script
did).</p>
</blockquote>
<p>The following is a quick analysis of the top organizations patenting
in the field of databases.</p>
<ol style="list-style-type: decimal">
<li>The first step is to download the relevant data fields from the
PatentsView API:</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/patentsview/index.html">patentsview</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jkunst.com/highcharter/" class="external-link">highcharter</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/DT" class="external-link">DT</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># We first need to write a query. Our query will look for "databases" in either </span></span>
<span><span class="co"># the patent title or abstract...Note, this isn't a terribly good way to ID our </span></span>
<span><span class="co"># patents, but it will work for the purpose of demonstration. Users who are </span></span>
<span><span class="co"># interested in writing higher-quality queries could consult the large body of </span></span>
<span><span class="co"># research that has been done in field of patent document retrieval.</span></span>
<span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/with_qfuns.html">with_qfuns</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">and</a></span><span class="op">(</span></span>
<span>     <span class="fu">neq</span><span class="op">(</span><span class="st">"assignees.assignee_organization"</span> <span class="op">=</span> <span class="st">""</span><span class="op">)</span>,</span>
<span>     <span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">or</a></span><span class="op">(</span></span>
<span>       <span class="fu">text_phrase</span><span class="op">(</span>patent_abstract <span class="op">=</span> <span class="st">"databases"</span><span class="op">)</span>,</span>
<span>       <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span>patent_title <span class="op">=</span> <span class="st">"databases"</span><span class="op">)</span></span>
<span>     <span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">query</span></span>
<span><span class="co">#&gt; {"_and":[{"_neq":{"assignees.assignee_organization":""}},{"_or":[{"_text_phrase":{"patent_abstract":"databases"}},{"_contains":{"patent_title":"databases"}}]}]}</span></span>
<span></span>
<span><span class="co"># Create a list of the fields we'll need for the analysis.</span></span>
<span><span class="co"># We'll request both "patent_earliest_application_date" and</span></span>
<span><span class="co"># "applications.filing_date" so that either could be used</span></span>
<span><span class="co"># in the plot below</span></span>
<span></span>
<span><span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"patent_id"</span>, <span class="st">"patent_date"</span>, <span class="st">"patent_year"</span>, <span class="st">"patent_earliest_application_date"</span>,</span>
<span>  <span class="st">"patent_num_us_patents_cited"</span>, <span class="st">"application.filing_date"</span>,</span>
<span>  <span class="st">"assignees"</span>  <span class="co"># the assignee fields come back in a nested object</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Send an HTTP request to the PatentsView API to get the data</span></span>
<span><span class="va">pv_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">query</span>, fields <span class="op">=</span> <span class="va">fields</span>, all_pages <span class="op">=</span> <span class="cn">TRUE</span>, size <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span><span class="va">pv_out</span></span>
<span><span class="co">#&gt; $data</span></span>
<span><span class="co">#&gt; #### A list with a single data frame (with list column(s) inside) on patents level:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ patents:'data.frame': 9167 obs. of  7 variables:</span></span>
<span><span class="co">#&gt;   ..$ patent_id                       : chr [1:9167] "10000987" ...</span></span>
<span><span class="co">#&gt;   ..$ patent_date                     : chr [1:9167] "2018-06-19" ...</span></span>
<span><span class="co">#&gt;   ..$ patent_year                     : int [1:9167] 2018 2018 ...</span></span>
<span><span class="co">#&gt;   ..$ patent_earliest_application_date: chr [1:9167] "2014-02-20" ...</span></span>
<span><span class="co">#&gt;   ..$ patent_num_us_patents_cited     : int [1:9167] 163 7 ...</span></span>
<span><span class="co">#&gt;   ..$ application                     :List of 9167</span></span>
<span><span class="co">#&gt;   ..$ assignees                       :List of 9167</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $query_results</span></span>
<span><span class="co">#&gt; #### Distinct entity counts across all downloadable pages of output:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; total_hits = 9,167</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Now let’s identify who the top assignees are based on how many
patents they have in our data set. We’ll also calculate how many total
patents these assignees have and what fraction of their total patents
relate to databases.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Unnest the data frames that are stored in the assignee list column</span></span>
<span><span class="va">dl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/unnest_pv_data.html">unnest_pv_data</a></span><span class="op">(</span><span class="va">pv_out</span><span class="op">$</span><span class="va">data</span>, <span class="st">"patent_id"</span><span class="op">)</span></span>
<span><span class="va">dl</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ application:'data.frame': 9167 obs. of  2 variables:</span></span>
<span><span class="co">#&gt;   ..$ patent_id  : chr [1:9167] "10000987" ...</span></span>
<span><span class="co">#&gt;   ..$ filing_date: chr [1:9167] "2014-02-20" ...</span></span>
<span><span class="co">#&gt;  $ assignees  :'data.frame': 8667 obs. of  12 variables:</span></span>
<span><span class="co">#&gt;   ..$ patent_id                     : chr [1:8667] "10000987" ...</span></span>
<span><span class="co">#&gt;   ..$ assignee                      : chr [1:8667] "https://search.patentsvie"..</span></span>
<span><span class="co">#&gt;   ..$ assignee_id                   : chr [1:8667] "03d12163-9869-4894-92b3-5"..</span></span>
<span><span class="co">#&gt;   ..$ assignee_type                 : chr [1:8667] "2" ...</span></span>
<span><span class="co">#&gt;   ..$ assignee_individual_name_first: chr [1:8667] NA ...</span></span>
<span><span class="co">#&gt;   ..$ assignee_individual_name_last : chr [1:8667] NA ...</span></span>
<span><span class="co">#&gt;   ..$ assignee_organization         : chr [1:8667] "NATIONAL OILWELL VARCO, L"..</span></span>
<span><span class="co">#&gt;   ..$ assignee_location_id          : chr [1:8667] "4e49a0a0-16c8-11ed-9b5f-1"..</span></span>
<span><span class="co">#&gt;   ..$ assignee_city                 : chr [1:8667] "Houston" ...</span></span>
<span><span class="co">#&gt;   ..$ assignee_state                : chr [1:8667] "TX" ...</span></span>
<span><span class="co">#&gt;   ..$ assignee_country              : chr [1:8667] "US" ...</span></span>
<span><span class="co">#&gt;   ..$ assignee_sequence             : int [1:8667] 0 0 ...</span></span>
<span><span class="co">#&gt;  $ patents    :'data.frame': 9167 obs. of  5 variables:</span></span>
<span><span class="co">#&gt;   ..$ patent_id                       : chr [1:9167] "10000987" ...</span></span>
<span><span class="co">#&gt;   ..$ patent_date                     : chr [1:9167] "2018-06-19" ...</span></span>
<span><span class="co">#&gt;   ..$ patent_year                     : int [1:9167] 2018 2018 ...</span></span>
<span><span class="co">#&gt;   ..$ patent_earliest_application_date: chr [1:9167] "2014-02-20" ...</span></span>
<span><span class="co">#&gt;   ..$ patent_num_us_patents_cited     : int [1:9167] 163 7 ...</span></span>
<span></span>
<span><span class="co"># We don't get the assignee_total_num_patents back from the patent endpoint any longer.</span></span>
<span><span class="co"># We'll have to make a call to the assignee endpoint once we know who the top 75</span></span>
<span><span class="co"># assignees are.</span></span>
<span></span>
<span><span class="co"># We requested assignees.assignee_id but it comes back in the assignees object</span></span>
<span><span class="co"># with key "assignee" (the _id clipped off) and a GUID looking value ex:</span></span>
<span><span class="co"># https://search.patentsview.org/api/v1/assignee/4e49a0a0-16c8-11ed-9b5f-1234bde3cd05/</span></span>
<span><span class="co"># We want to parse out the assignee_ids, ex: 4e49a0a0-16c8-11ed-9b5f-1234bde3cd05</span></span>
<span><span class="co"># (The API's documetation shows that the assignee URL parameter is the assignee_id)</span></span>
<span></span>
<span><span class="co"># Create a data frame with the top 75 assignees:</span></span>
<span><span class="va">top_asgns</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">dl</span><span class="op">$</span><span class="va">assignees</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>assignee_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">sub</a></span><span class="op">(</span><span class="st">".*/([0-9a-f-]+)/$"</span>, <span class="st">"\\1"</span>, <span class="va">assignee</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">assignee_organization</span>, <span class="va">assignee_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>db_pats <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">db_pats</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">75</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Now that we have the assignee_id's,  we can make a single call to the assignee</span></span>
<span><span class="co"># endpoint to get the total number of patents for each of our top_asgns. (One</span></span>
<span><span class="co"># call rather than 75 calls using the unparsed "assignee" URLs)</span></span>
<span></span>
<span><span class="va">assignee_query</span> <span class="op">=</span>  <span class="va">qry_funs</span><span class="op">$</span><span class="fu">eq</span><span class="op">(</span>assignee_id <span class="op">=</span> <span class="va">top_asgns</span><span class="op">$</span><span class="va">assignee_id</span><span class="op">)</span></span>
<span></span>
<span><span class="va">assignee_fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"assignee_id"</span>, <span class="st">"assignee_organization"</span>, <span class="st">"assignee_num_patents"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># We'll post to the API, the query is a pretty large string (an "or" of 75 assignee_ids)</span></span>
<span><span class="va">assignee_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">assignee_query</span> , fields <span class="op">=</span> <span class="va">assignee_fields</span>, all_pages <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>   size <span class="op">=</span> <span class="fl">1000</span>, endpoint <span class="op">=</span> <span class="st">"assignee"</span>, method <span class="op">=</span> <span class="st">"POST"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">assignee_counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/unnest_pv_data.html">unnest_pv_data</a></span><span class="op">(</span><span class="va">assignee_out</span><span class="op">$</span><span class="va">data</span>, <span class="st">"assignee_id"</span><span class="op">)</span></span>
<span><span class="va">assignee_counts</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ assignees:'data.frame':   75 obs. of  3 variables:</span></span>
<span><span class="co">#&gt;   ..$ assignee_id          : chr [1:75] "11cc018d-ebcb-428e-95d3-b8e98bd6ce71"..</span></span>
<span><span class="co">#&gt;   ..$ assignee_organization: chr [1:75] "Sun Microsystems Inc." ...</span></span>
<span><span class="co">#&gt;   ..$ assignee_num_patents : int [1:75] 7682 24265 ...</span></span>
<span></span>
<span><span class="co"># Here we redo top_asgns now that we have all the fields we need.</span></span>
<span><span class="co"># We join in the total counts and mutate in the percentages </span></span>
<span><span class="va">top_asgns</span> <span class="op">&lt;-</span> <span class="va">dl</span><span class="op">$</span><span class="va">assignees</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">assignee_counts</span><span class="op">$</span><span class="va">assignees</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>ttl_pats <span class="op">=</span> <span class="va">assignee_num_patents</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">assignee_organization</span>, <span class="va">ttl_pats</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>db_pats <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>frac_db_pats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">db_pats</span> <span class="op">/</span> <span class="va">ttl_pats</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">db_pats</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># trying to avoid Error: Chromote: timed out waiting for event Page.loadEventFired</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html" class="external-link">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span></span>
<span>   delay <span class="op">=</span> <span class="fl">45</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Create datatable</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">top_asgns</span>,</span>
<span>  rownames <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  colnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Assignee"</span>, <span class="st">"DB patents"</span>, <span class="st">"Total patents"</span>, <span class="st">"DB patents / total patents"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  caption <span class="op">=</span> <span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">tags</a></span><span class="op">$</span><span class="fu">caption</span><span class="op">(</span></span>
<span>    style <span class="op">=</span> <span class="st">'caption-side: top; text-align: left; font-style: italic;'</span>,</span>
<span>    <span class="st">"Table 1: Top assignees in 'databases'"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pageLength <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="figure/topdatatable-1.png"></p>
<p><br></p>
<p>IBM is far and away the biggest player in the field. However, we can
see that Oracle and Salesforce.com are relatively more interested in
this area, as indicated by the fraction of their patents that relate to
databases.</p>
<ol start="3" style="list-style-type: decimal">
<li>Let’s see how these assignees’ level of investment in databases has
changed over time.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Comment from the original version of this page:</span></span>
<span><span class="co"># Create a data frame with patent counts by application year for each assignee</span></span>
<span></span>
<span><span class="co"># The patent endpoint can now return "patent_earliest_application_date"  and/or</span></span>
<span><span class="co"># application.filing_date.  We requested both above so we can use either here</span></span>
<span><span class="co"># to create app_yr.  The API's data dictionary (if one exists) would need to be</span></span>
<span><span class="co"># consulted to find out how these fields differ. (There are data dictionaries for</span></span>
<span><span class="co"># the bulk downloadable files, I'll follow up with the API team to see if there</span></span>
<span><span class="co"># is one for the API.)</span></span>
<span></span>
<span><span class="co"># We'll use patent_earliest_application_date, we'd need an additional</span></span>
<span><span class="co"># full_join(., dl$application) %&gt;%  if we want to use filing_date</span></span>
<span><span class="co"># mutate(app_yr = as.numeric(substr(filing_date, 1, 4)))</span></span>
<span></span>
<span><span class="co"># As an aside, I don't think it's possible to querry the API for patents</span></span>
<span><span class="co"># where the two fields differ, least not directly.  We could request both</span></span>
<span><span class="co"># fields and look for differences ourselves but we can't query where</span></span>
<span><span class="co"># {"_neq":{"patent_earliest_application_date":{"application.filing_date"}}</span></span>
<span></span>
<span><span class="co"># Get the top 5 organizations since slice wasn't working out in the full_join below.</span></span>
<span><span class="co"># We want data to just be the top 5 assignees, not all 75 assignees</span></span>
<span><span class="va">top_five</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">top_asgns</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> </span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span><span class="va">dl</span><span class="op">$</span><span class="va">assignees</span>, <span class="va">dl</span><span class="op">$</span><span class="va">patents</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>app_yr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">patent_earliest_application_date</span>, <span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">assignee_organization</span>, <span class="va">app_yr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">top_five</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">assignee_organization</span>, <span class="va">app_yr</span>, <span class="va">n</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the data using highcharter:</span></span>
<span><span class="fu"><a href="https://jkunst.com/highcharter/reference/hchart.html" class="external-link">hchart</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>, <span class="st">"line"</span>, </span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hcaes.html" class="external-link">hcaes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">app_yr</span>, y <span class="op">=</span> <span class="va">n</span>, group <span class="op">=</span> <span class="va">assignee_organization</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hc_plotOptions.html" class="external-link">hc_plotOptions</a></span><span class="op">(</span>series <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>marker <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>enabled <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hc_xAxis.html" class="external-link">hc_xAxis</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>text <span class="op">=</span> <span class="st">"Grant year"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hc_yAxis.html" class="external-link">hc_yAxis</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>text <span class="op">=</span> <span class="st">"Patents"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hc_title.html" class="external-link">hc_title</a></span><span class="op">(</span>text <span class="op">=</span> <span class="st">"Top five assignees in 'databases'"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hc_subtitle.html" class="external-link">hc_subtitle</a></span><span class="op">(</span>text <span class="op">=</span> <span class="st">"Yearly patent applications over time"</span><span class="op">)</span></span></code></pre></div>
<p><img src="figure/topchart-1.png"></p>
<p>It’s hard to see any clear trends in this graph. What is clear is
that the top assignees have all been patenting in the field for many
years.</p>
<ol start="4" style="list-style-type: decimal">
<li>Finally, let’s see how the organizations compare in terms of their
citation rates. First, we’ll need to normalize the raw citation counts
by publication year, so that older patents don’t have an unfair
advantage over younger patents (i.e., because they have had a longer
time to accumulate citations).</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Write a ranking function that will be used to rank patents by their citation counts</span></span>
<span><span class="va">percent_rank2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">x</span>, ties.method <span class="op">=</span> <span class="st">"average"</span>, na.last <span class="op">=</span> <span class="st">"keep"</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a data frame with normalized citation rates and stats from Step 2</span></span>
<span><span class="va">asng_p_dat</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">dl</span><span class="op">$</span><span class="va">patents</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># mutate(patent_yr = substr(patent_date, 1, 4)) %&gt;%</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">patent_year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>perc_cite <span class="op">=</span> <span class="fu">percent_rank2</span><span class="op">(</span><span class="va">patent_num_us_patents_cited</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">dl</span><span class="op">$</span><span class="va">assignees</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">assignee_organization</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_perc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">perc_cite</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">top_asgns</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">ttl_pats</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#f1c40f"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">asng_p_dat</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="47%">
<col width="10%">
<col width="8%">
<col width="9%">
<col width="14%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="left">assignee_organization</th>
<th align="right">mean_perc</th>
<th align="right">db_pats</th>
<th align="right">ttl_pats</th>
<th align="right">frac_db_pats</th>
<th align="left">color</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">International Business Machines Corporation</td>
<td align="right">0.4671265</td>
<td align="right">809</td>
<td align="right">161878</td>
<td align="right">0.005</td>
<td align="left">#f1c40f</td>
</tr>
<tr class="even">
<td align="left">Sony Group Corporation</td>
<td align="right">0.3727859</td>
<td align="right">27</td>
<td align="right">61678</td>
<td align="right">0.000</td>
<td align="left">#f1c40f</td>
</tr>
<tr class="odd">
<td align="left">FUJITSU LIMITED</td>
<td align="right">0.4034433</td>
<td align="right">45</td>
<td align="right">56149</td>
<td align="right">0.001</td>
<td align="left">#f1c40f</td>
</tr>
<tr class="even">
<td align="left">General Electric Company</td>
<td align="right">0.4491179</td>
<td align="right">24</td>
<td align="right">51378</td>
<td align="right">0.000</td>
<td align="left">#f1c40f</td>
</tr>
<tr class="odd">
<td align="left">Intel Corporation</td>
<td align="right">0.3462831</td>
<td align="right">20</td>
<td align="right">51141</td>
<td align="right">0.000</td>
<td align="left">#f1c40f</td>
</tr>
<tr class="even">
<td align="left">HITACHI, LTD.</td>
<td align="right">0.3609991</td>
<td align="right">50</td>
<td align="right">45842</td>
<td align="right">0.001</td>
<td align="left">#f1c40f</td>
</tr>
</tbody>
</table>
<p>Now let’s visualize the data. Each assignee will be represented by a
point/bubble. The x-value of the point will represent the total number
of patents the assignee has published in the field of databases (on a
log scale), while the y-value will represent its average normalized
citation rate. The size of the bubble will be proportional to the
percent of the assignee’s patents that relate to databases.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Adapted from https://jkunst.com/highcharter/articles/showcase.html</span></span>
<span><span class="fu"><a href="https://jkunst.com/highcharter/reference/hchart.html" class="external-link">hchart</a></span><span class="op">(</span></span>
<span>  <span class="va">asng_p_dat</span>, <span class="st">"scatter"</span>, </span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hcaes.html" class="external-link">hcaes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">db_pats</span>, y <span class="op">=</span> <span class="va">mean_perc</span>, size <span class="op">=</span> <span class="va">frac_db_pats</span>, </span>
<span>        group <span class="op">=</span> <span class="va">assignee_organization</span>, color <span class="op">=</span> <span class="va">color</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hc_xAxis.html" class="external-link">hc_xAxis</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>text <span class="op">=</span> <span class="st">"DB patents"</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"logarithmic"</span>,</span>
<span>    allowDecimals <span class="op">=</span> <span class="cn">FALSE</span>, endOnTick <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hc_yAxis.html" class="external-link">hc_yAxis</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>text <span class="op">=</span> <span class="st">"Mean cite perc."</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hc_title.html" class="external-link">hc_title</a></span><span class="op">(</span>text <span class="op">=</span> <span class="st">"Top assignees in 'databases'"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hc_add_theme.html" class="external-link">hc_add_theme</a></span><span class="op">(</span><span class="fu"><a href="https://jkunst.com/highcharter/reference/hc_theme_flatdark.html" class="external-link">hc_theme_flatdark</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hc_tooltip.html" class="external-link">hc_tooltip</a></span><span class="op">(</span></span>
<span>    useHTML <span class="op">=</span> <span class="cn">TRUE</span>, pointFormat <span class="op">=</span> <span class="fu"><a href="https://jkunst.com/highcharter/reference/tooltip_table.html" class="external-link">tooltip_table</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DB patents"</span>, <span class="st">"Mean cite percentile"</span>, <span class="st">"Fraction DB patents"</span><span class="op">)</span>,</span>
<span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"{point.db_pats:.0f}"</span>,<span class="st">"{point.mean_perc:.2f}"</span>, <span class="st">"{point.frac_db_pats:.3f}"</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://jkunst.com/highcharter/reference/hc_legend.html" class="external-link">hc_legend</a></span><span class="op">(</span>enabled <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="figure/tophchart-1.png"></p>
<p><br></p>
<p>It looks like Microsoft has relatively high values across all three
three metrics (average citation percentile, number of database patents,
and percent of total patents that are related to databases). IBM has
more patents than Microsoft, but also has a lower average citation
percentile.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Baker, Russ Allen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
