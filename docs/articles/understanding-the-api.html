<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Understanding the API • patentsview</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Understanding the API">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">patentsview</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-api-changes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-flag"></span> API Changes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-api-changes">
<li><a class="dropdown-item" href="../articles/api-changes.html"><span class="fa fa-exclamation"></span> 2025 API Changes</a></li>
    <li><a class="dropdown-item" href="../articles/converting-an-existing-script.html"><span class="fa fa-sync"></span> Converting an Existing Script</a></li>
    <li><a class="dropdown-item" href="../articles/result-set-paging.html"><span class="fa fa-book"></span> Result Set Paging</a></li>
    <li><a class="dropdown-item" href="../articles/understanding-the-api.html"><span class="fa fa-school"></span> Understanding the API</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/getting-started.html"><span class="fa fa-play"></span> Getting started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/writing-queries.html"><span class="fa fa-pencil"></span> Writing queries</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-applications" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-bar-chart"></span> Applications</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-applications">
<li><a class="dropdown-item" href="../articles/examples.html"><span class="fa fa-code"></span> Examples</a></li>
    <li><a class="dropdown-item" href="../articles/top-assignees.html"><span class="fa fa-university"></span> Top assignees</a></li>
    <li><a class="dropdown-item" href="../articles/citation-networks.html"><span class="fa fa-long-arrow-left"></span> Citation networks</a></li>
    <li><a class="dropdown-item" href="../articles/ropensci-blog-post.html"><span class="fa fa-bullhorn"></span> ropensci announcement</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/patentsview/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Understanding the API</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/patentsview/blob/HEAD/vignettes/understanding-the-api.Rmd" class="external-link"><code>vignettes/understanding-the-api.Rmd</code></a></small>
      <div class="d-none name"><code>understanding-the-api.Rmd</code></div>
    </div>

    
    
<p>Oh, the interesting things you’ll learn when you take the time to
read the API’s documentation! Here are two gems gleaned from a <a href="https://github.com/PatentsView/PatentsView-Code-Examples/blob/main/PatentSearch/0-patentsearch-api-demo.ipynb" class="external-link">jupyter
notebook</a> in PatentsView’s PatentsView-Code-Snippets repo.</p>
<div class="section level2">
<h2 id="fields-shorthand">Fields Shorthand<a class="anchor" aria-label="anchor" href="#fields-shorthand"></a>
</h2>
<p>The notebook starts out fairly fluffy but things really get
interesting really quickly. See this under “constructing your query”, I
don’t remember seeing this anywhere else:</p>
<blockquote>
<p>Some endpoints contain groups of fields representing related entities
connected to one of that endpoint’s primary entity type; for example,
the patent endpoint contains a field “inventors”, which contains
information on all inventors associated with any given patent. <em>The
fields for related entities can be requested in the API request’s fields
parameter as a group by using the group name in the fields
parameter</em>, or individually by specifying the required field as
“{entity_type}.{subfield}”.</p>
</blockquote>
<p>Mind blown, so we can, for example, request all the nested
application fields from the patent endpoint by simply requesting
“application” in the fields list.</p>
<p><a name="all-fields"> The new version of the R package will let its
users leverage this same feature, allowing group names to be specified
in the fields parameter.</a></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/patentsview/index.html">patentsview</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">query</span> <span class="op">&lt;-</span> <span class="va">qry_funs</span><span class="op">$</span><span class="fu">eq</span><span class="op">(</span>patent_id <span class="op">=</span> <span class="st">"10568228"</span><span class="op">)</span></span>
<span><span class="va">shorthand_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">query</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"application"</span><span class="op">)</span>, method <span class="op">=</span> <span class="st">"POST"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Now that the R package uses httr2, we can use its last_request()</span></span>
<span><span class="co"># to see what was POSTed to the API</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/last_response.html" class="external-link">last_request</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">body</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"q":{"_eq":{"patent_id":"10568228"}},"f":["application","patent_id"],"o":{"size":1000}}</span></span>
<span></span>
<span><span class="co"># Here we view the results</span></span>
<span><span class="va">shorthand_results</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">patent</span><span class="op">$</span><span class="va">application</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;   application_id application_type filing_date series_code rule_47_flag</span></span>
<span><span class="co">#&gt; 1      15/995745               15  2018-06-01          15         TRUE</span></span>
<span><span class="co">#&gt;   filing_type</span></span>
<span><span class="co">#&gt; 1          15</span></span>
<span></span>
<span><span class="co"># Now we'll try to explicitly request all the application fields and make a POST to the API</span></span>
<span><span class="va">explicit_fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_fields.html">get_fields</a></span><span class="op">(</span><span class="st">"patent"</span>, groups <span class="op">=</span> <span class="st">"application"</span><span class="op">)</span></span>
<span><span class="va">explicit_fields</span></span>
<span><span class="co">#&gt; [1] "application.application_id"   "application.application_type"</span></span>
<span><span class="co">#&gt; [3] "application.filing_date"      "application.filing_type"     </span></span>
<span><span class="co">#&gt; [5] "application.rule_47_flag"     "application.series_code"</span></span>
<span><span class="va">explicit_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">query</span>, fields <span class="op">=</span> <span class="va">explicit_fields</span>, method <span class="op">=</span> <span class="st">"POST"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># but the R package figured out that the shorthand could be used instead</span></span>
<span><span class="co"># so what was POSTed to the API is the same!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu">httr2</span><span class="fu">::</span><span class="fu"><a href="https://httr2.r-lib.org/reference/last_response.html" class="external-link">last_request</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">body</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"q":{"_eq":{"patent_id":"10568228"}},"f":["application","patent_id"],"o":{"size":1000}}</span></span>
<span></span>
<span><span class="co"># and, of course, the results from the API are the same</span></span>
<span><span class="va">explicit_results</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">patent</span><span class="op">$</span><span class="va">application</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;   application_id application_type filing_date series_code rule_47_flag</span></span>
<span><span class="co">#&gt; 1      15/995745               15  2018-06-01          15         TRUE</span></span>
<span><span class="co">#&gt;   filing_type</span></span>
<span><span class="co">#&gt; 1          15</span></span>
<span></span>
<span><span class="co"># (Observation reported to the API team: application_type, series_code and filing_type</span></span>
<span><span class="co"># all seem to have the same values and not just in this one example.)</span></span></code></pre></div>
<p>The motivation to adopt the API’s shorthand is that, with a modest
query, explicitly requesting all of the patent endpoint’s fields can be
too much to send via a GET request (the resulting URL can exceed
4K).</p>
</div>
<div class="section level2">
<h2 id="unexpected-results">Unexpected Results<a class="anchor" aria-label="anchor" href="#unexpected-results"></a>
</h2>
<p>Then, as if that wasn’t enough, some non-obvious behavior appears
under the second bullet point under the “Queries using related entity
fields” header:</p>
<blockquote>
<p>When applying multiple conditions to related-entity fields, a central
entity record will be returned if any combination of its related
entities satisfy those conditions.</p>
</blockquote>
<p>In their example, they use George Washington as an inventor.
Humorously, there are modern inventors with that name! Abraham Lincoln
is also used as an inventor. Good ol’ Abe is the only US president so
far to receive a <a href="https://ppubs.uspto.gov/pubwebapp/external.html?db=USPAT&amp;type=ids&amp;q=(0006469).pn." class="external-link">patent</a>
but it’s too early to be in the patentsview database and there are no
modern Abraham Lincolns to be found as inventors.</p>
<p>To demonstrate the API’s not-exactly-intuitive behavior, we’ll keep
George as an inventor but substitute Thomas Jefferson for Abe, as there
are inventors going by that famous name, though they aren’t on nickels
or two dollar bills in the US.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">patents_query</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/with_qfuns.html">with_qfuns</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">or</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">and</a></span><span class="op">(</span></span>
<span>        <span class="fu">text_phrase</span><span class="op">(</span>inventors.inventor_name_first <span class="op">=</span> <span class="st">"George"</span><span class="op">)</span>,</span>
<span>        <span class="fu">text_phrase</span><span class="op">(</span>inventors.inventor_name_last <span class="op">=</span> <span class="st">"Washington"</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">and</a></span><span class="op">(</span></span>
<span>        <span class="fu">text_phrase</span><span class="op">(</span>inventors.inventor_name_first <span class="op">=</span> <span class="st">"Thomas"</span><span class="op">)</span>,</span>
<span>        <span class="fu">text_phrase</span><span class="op">(</span>inventors.inventor_name_last <span class="op">=</span> <span class="st">"Jefferson"</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">patent_fields</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"patent_id"</span>, <span class="st">"inventors.inventor_name_first"</span>, <span class="st">"inventors.inventor_name_last"</span><span class="op">)</span></span>
<span><span class="va">pat_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">patents_query</span>, fields<span class="op">=</span><span class="va">patent_fields</span>, endpoint<span class="op">=</span><span class="st">"patent"</span><span class="op">)</span></span>
<span><span class="va">dl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/unnest_pv_data.html">unnest_pv_data</a></span><span class="op">(</span><span class="va">pat_res</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># We got back all the inventors on the patents that met our search criteria.  We'll filter out</span></span>
<span><span class="co"># the inventors that didn't strictly meet our criteria (they're coinventors that came along for </span></span>
<span><span class="co"># the ride with the ones that met our criteria), we want the noted behavior to be clear.</span></span>
<span></span>
<span><span class="va">display_inventors</span> <span class="op">&lt;-</span> </span>
<span>   <span class="va">dl</span><span class="op">$</span><span class="va">inventors</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^(George|Thomas)"</span>, <span class="va">inventor_name_first</span> <span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^(Washington|Jefferson)"</span>, <span class="va">inventor_name_last</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">display_inventors</span></span>
<span><span class="co">#&gt;    patent_id</span></span>
<span><span class="co">#&gt; 1   10180440</span></span>
<span><span class="co">#&gt; 2   10180440</span></span>
<span><span class="co">#&gt; 3   10374815</span></span>
<span><span class="co">#&gt; 4   10374815</span></span>
<span><span class="co">#&gt; 5   10568228</span></span>
<span><span class="co">#&gt; 6   10664808</span></span>
<span><span class="co">#&gt; 7   11032709</span></span>
<span><span class="co">#&gt; 8   11032709</span></span>
<span><span class="co">#&gt; 9   12263952</span></span>
<span><span class="co">#&gt; 10   4078607</span></span>
<span><span class="co">#&gt; 11   4104193</span></span>
<span><span class="co">#&gt; 12   5643452</span></span>
<span><span class="co">#&gt; 13   5645778</span></span>
<span><span class="co">#&gt; 14   5736046</span></span>
<span><span class="co">#&gt; 15   5897817</span></span>
<span><span class="co">#&gt; 16   5914971</span></span>
<span><span class="co">#&gt; 17   5914971</span></span>
<span><span class="co">#&gt; 18   6218441</span></span>
<span><span class="co">#&gt; 19   6881337</span></span>
<span><span class="co">#&gt; 20   6905071</span></span>
<span><span class="co">#&gt; 21   6905071</span></span>
<span><span class="co">#&gt; 22   6905071</span></span>
<span><span class="co">#&gt; 23   7144505</span></span>
<span><span class="co">#&gt; 24   7598629</span></span>
<span><span class="co">#&gt; 25   7598629</span></span>
<span><span class="co">#&gt; 26   7971908</span></span>
<span><span class="co">#&gt; 27   7971908</span></span>
<span><span class="co">#&gt; 28   7971908</span></span>
<span><span class="co">#&gt; 29   8347213</span></span>
<span><span class="co">#&gt; 30   8347213</span></span>
<span><span class="co">#&gt; 31   8717367</span></span>
<span><span class="co">#&gt; 32   8717367</span></span>
<span><span class="co">#&gt;                                                                        inventor</span></span>
<span><span class="co">#&gt; 1       https://search.patentsview.org:80/api/v1/inventor/fl:st_ln:jefferson-2/</span></span>
<span><span class="co">#&gt; 2             https://search.patentsview.org:80/api/v1/inventor/fl:th_ln:fay-2/</span></span>
<span><span class="co">#&gt; 3          https://search.patentsview.org:80/api/v1/inventor/fl:th_ln:bonola-1/</span></span>
<span><span class="co">#&gt; 4       https://search.patentsview.org:80/api/v1/inventor/fl:lo_ln:jefferson-2/</span></span>
<span><span class="co">#&gt; 5      https://search.patentsview.org:80/api/v1/inventor/fl:ge_ln:washington-1/</span></span>
<span><span class="co">#&gt; 6     https://search.patentsview.org:80/api/v1/inventor/fl:jo_ln:washington-11/</span></span>
<span><span class="co">#&gt; 7          https://search.patentsview.org:80/api/v1/inventor/fl:th_ln:bonola-1/</span></span>
<span><span class="co">#&gt; 8       https://search.patentsview.org:80/api/v1/inventor/fl:lo_ln:jefferson-2/</span></span>
<span><span class="co">#&gt; 9  https://search.patentsview.org:80/api/v1/inventor/ifajrttz5x29w1n3bk7z8if29/</span></span>
<span><span class="co">#&gt; 10      https://search.patentsview.org:80/api/v1/inventor/fl:th_ln:jefferson-1/</span></span>
<span><span class="co">#&gt; 11      https://search.patentsview.org:80/api/v1/inventor/fl:th_ln:jefferson-1/</span></span>
<span><span class="co">#&gt; 12     https://search.patentsview.org:80/api/v1/inventor/fl:ge_ln:washington-2/</span></span>
<span><span class="co">#&gt; 13     https://search.patentsview.org:80/api/v1/inventor/fl:ge_ln:washington-2/</span></span>
<span><span class="co">#&gt; 14     https://search.patentsview.org:80/api/v1/inventor/fl:ge_ln:washington-2/</span></span>
<span><span class="co">#&gt; 15     https://search.patentsview.org:80/api/v1/inventor/fl:ge_ln:washington-2/</span></span>
<span><span class="co">#&gt; 16          https://search.patentsview.org:80/api/v1/inventor/fl:ge_ln:burke-2/</span></span>
<span><span class="co">#&gt; 17     https://search.patentsview.org:80/api/v1/inventor/fl:ro_ln:washington-2/</span></span>
<span><span class="co">#&gt; 18     https://search.patentsview.org:80/api/v1/inventor/fl:ge_ln:washington-2/</span></span>
<span><span class="co">#&gt; 19     https://search.patentsview.org:80/api/v1/inventor/fl:ge_ln:washington-2/</span></span>
<span><span class="co">#&gt; 20       https://search.patentsview.org:80/api/v1/inventor/fl:th_ln:amundsen-2/</span></span>
<span><span class="co">#&gt; 21          https://search.patentsview.org:80/api/v1/inventor/fl:ge_ln:kolis-1/</span></span>
<span><span class="co">#&gt; 22      https://search.patentsview.org:80/api/v1/inventor/fl:ma_ln:jefferson-2/</span></span>
<span><span class="co">#&gt; 23     https://search.patentsview.org:80/api/v1/inventor/fl:ge_ln:washington-2/</span></span>
<span><span class="co">#&gt; 24          https://search.patentsview.org:80/api/v1/inventor/fl:ge_ln:burke-2/</span></span>
<span><span class="co">#&gt; 25     https://search.patentsview.org:80/api/v1/inventor/fl:ro_ln:washington-2/</span></span>
<span><span class="co">#&gt; 26          https://search.patentsview.org:80/api/v1/inventor/fl:th_ln:tilly-1/</span></span>
<span><span class="co">#&gt; 27       https://search.patentsview.org:80/api/v1/inventor/fl:th_ln:dimambro-1/</span></span>
<span><span class="co">#&gt; 28      https://search.patentsview.org:80/api/v1/inventor/fl:al_ln:jefferson-1/</span></span>
<span><span class="co">#&gt; 29        https://search.patentsview.org:80/api/v1/inventor/fl:th_ln:clifton-3/</span></span>
<span><span class="co">#&gt; 30      https://search.patentsview.org:80/api/v1/inventor/fl:br_ln:jefferson-1/</span></span>
<span><span class="co">#&gt; 31        https://search.patentsview.org:80/api/v1/inventor/fl:th_ln:clifton-3/</span></span>
<span><span class="co">#&gt; 32      https://search.patentsview.org:80/api/v1/inventor/fl:br_ln:jefferson-1/</span></span>
<span><span class="co">#&gt;                  inventor_id inventor_name_first    inventor_name_last</span></span>
<span><span class="co">#&gt; 1       fl:st_ln:jefferson-2          Stanley T.             Jefferson</span></span>
<span><span class="co">#&gt; 2             fl:th_ln:fay-2              Thomas                   FAY</span></span>
<span><span class="co">#&gt; 3          fl:th_ln:bonola-1           Thomas J.                Bonola</span></span>
<span><span class="co">#&gt; 4       fl:lo_ln:jefferson-2             Lorri L             Jefferson</span></span>
<span><span class="co">#&gt; 5      fl:ge_ln:washington-1      George Elliott            Washington</span></span>
<span><span class="co">#&gt; 6     fl:jo_ln:washington-11                Joel            Washington</span></span>
<span><span class="co">#&gt; 7          fl:th_ln:bonola-1           Thomas J.                Bonola</span></span>
<span><span class="co">#&gt; 8       fl:lo_ln:jefferson-2             Lorri L             Jefferson</span></span>
<span><span class="co">#&gt; 9  ifajrttz5x29w1n3bk7z8if29              George Fitzgerald Washington</span></span>
<span><span class="co">#&gt; 10      fl:th_ln:jefferson-1              Thomas             Jefferson</span></span>
<span><span class="co">#&gt; 11      fl:th_ln:jefferson-1              Thomas             Jefferson</span></span>
<span><span class="co">#&gt; 12     fl:ge_ln:washington-2              George            Washington</span></span>
<span><span class="co">#&gt; 13     fl:ge_ln:washington-2              George            Washington</span></span>
<span><span class="co">#&gt; 14     fl:ge_ln:washington-2              George            Washington</span></span>
<span><span class="co">#&gt; 15     fl:ge_ln:washington-2              George            Washington</span></span>
<span><span class="co">#&gt; 16          fl:ge_ln:burke-2           George E.            Burke, Jr.</span></span>
<span><span class="co">#&gt; 17     fl:ro_ln:washington-2           Rodney B.            Washington</span></span>
<span><span class="co">#&gt; 18     fl:ge_ln:washington-2              George            Washington</span></span>
<span><span class="co">#&gt; 19     fl:ge_ln:washington-2              George            Washington</span></span>
<span><span class="co">#&gt; 20       fl:th_ln:amundsen-2              Thomas              Amundsen</span></span>
<span><span class="co">#&gt; 21          fl:ge_ln:kolis-1              George                 Kolis</span></span>
<span><span class="co">#&gt; 22      fl:ma_ln:jefferson-2             Matthew             Jefferson</span></span>
<span><span class="co">#&gt; 23     fl:ge_ln:washington-2              George            Washington</span></span>
<span><span class="co">#&gt; 24          fl:ge_ln:burke-2           George E.            Burke, Jr.</span></span>
<span><span class="co">#&gt; 25     fl:ro_ln:washington-2           Rodney B.            Washington</span></span>
<span><span class="co">#&gt; 26          fl:th_ln:tilly-1              Thomas                 Tilly</span></span>
<span><span class="co">#&gt; 27       fl:th_ln:dimambro-1           Thomas M.              DiMambro</span></span>
<span><span class="co">#&gt; 28      fl:al_ln:jefferson-1           Alfred A.             Jefferson</span></span>
<span><span class="co">#&gt; 29        fl:th_ln:clifton-3           Thomas M.               Clifton</span></span>
<span><span class="co">#&gt; 30      fl:br_ln:jefferson-1          Bradley C.             Jefferson</span></span>
<span><span class="co">#&gt; 31        fl:th_ln:clifton-3           Thomas M.               Clifton</span></span>
<span><span class="co">#&gt; 32      fl:br_ln:jefferson-1          Bradley C.             Jefferson</span></span>
<span><span class="co">#&gt;    inventor_gender_code                 inventor_location_id inventor_city</span></span>
<span><span class="co">#&gt; 1                     M a26e22db-16c8-11ed-9b5f-1234bde3cd05     Palo Alto</span></span>
<span><span class="co">#&gt; 2                     M 8f94a78e-16c8-11ed-9b5f-1234bde3cd05  Fort Collins</span></span>
<span><span class="co">#&gt; 3                     M d22da190-16c7-11ed-9b5f-1234bde3cd05       Cypress</span></span>
<span><span class="co">#&gt; 4                     F ca22ab34-16c7-11ed-9b5f-1234bde3cd05       Tomball</span></span>
<span><span class="co">#&gt; 5                     M ea0f11fa-16c7-11ed-9b5f-1234bde3cd05     Oak Creek</span></span>
<span><span class="co">#&gt; 6                     M 4affd925-16c8-11ed-9b5f-1234bde3cd05 San Francisco</span></span>
<span><span class="co">#&gt; 7                     M a26e22db-16c8-11ed-9b5f-1234bde3cd05     Palo Alto</span></span>
<span><span class="co">#&gt; 8                     F cddcf1ae-16c7-11ed-9b5f-1234bde3cd05        Spring</span></span>
<span><span class="co">#&gt; 9                     M ebd2597d-16c7-11ed-9b5f-1234bde3cd05    Blythewood</span></span>
<span><span class="co">#&gt; 10                    M 4e49a0a0-16c8-11ed-9b5f-1234bde3cd05       Houston</span></span>
<span><span class="co">#&gt; 11                    M 4e49a0a0-16c8-11ed-9b5f-1234bde3cd05       Houston</span></span>
<span><span class="co">#&gt; 12                    M f4141084-16c7-11ed-9b5f-1234bde3cd05         Miami</span></span>
<span><span class="co">#&gt; 13                    M ec3c5775-16c7-11ed-9b5f-1234bde3cd05       Miramar</span></span>
<span><span class="co">#&gt; 14                    M f4141084-16c7-11ed-9b5f-1234bde3cd05         Miami</span></span>
<span><span class="co">#&gt; 15                    M ec3c5775-16c7-11ed-9b5f-1234bde3cd05       Miramar</span></span>
<span><span class="co">#&gt; 16                    M 04726932-16c8-11ed-9b5f-1234bde3cd05       Raleigh</span></span>
<span><span class="co">#&gt; 17                    M 04726932-16c8-11ed-9b5f-1234bde3cd05       Raleigh</span></span>
<span><span class="co">#&gt; 18                    M ec3c5775-16c7-11ed-9b5f-1234bde3cd05       Miramar</span></span>
<span><span class="co">#&gt; 19                    M ec3c5775-16c7-11ed-9b5f-1234bde3cd05       Miramar</span></span>
<span><span class="co">#&gt; 20                    M f9f15056-16c7-11ed-9b5f-1234bde3cd05  Turnersville</span></span>
<span><span class="co">#&gt; 21                    M fc83ee3c-16c7-11ed-9b5f-1234bde3cd05    Pennsauken</span></span>
<span><span class="co">#&gt; 22                    M 09c79f9e-16c8-11ed-9b5f-1234bde3cd05      Seaville</span></span>
<span><span class="co">#&gt; 23                    M ec3c5775-16c7-11ed-9b5f-1234bde3cd05       Miramar</span></span>
<span><span class="co">#&gt; 24                    M 04726932-16c8-11ed-9b5f-1234bde3cd05       Raleigh</span></span>
<span><span class="co">#&gt; 25                    M 04726932-16c8-11ed-9b5f-1234bde3cd05       Raleigh</span></span>
<span><span class="co">#&gt; 26                    M f7b45376-16c7-11ed-9b5f-1234bde3cd05       Algonac</span></span>
<span><span class="co">#&gt; 27                    M f442979f-16c7-11ed-9b5f-1234bde3cd05          Troy</span></span>
<span><span class="co">#&gt; 28                    M f7cdbded-16c7-11ed-9b5f-1234bde3cd05    Southfield</span></span>
<span><span class="co">#&gt; 29                    M 0712f582-16c8-11ed-9b5f-1234bde3cd05        Boston</span></span>
<span><span class="co">#&gt; 30                    M 4affd925-16c8-11ed-9b5f-1234bde3cd05 San Francisco</span></span>
<span><span class="co">#&gt; 31                    M 0712f582-16c8-11ed-9b5f-1234bde3cd05        Boston</span></span>
<span><span class="co">#&gt; 32                    M 4affd925-16c8-11ed-9b5f-1234bde3cd05 San Francisco</span></span>
<span><span class="co">#&gt;    inventor_state inventor_country inventor_sequence</span></span>
<span><span class="co">#&gt; 1              CA               US                 1</span></span>
<span><span class="co">#&gt; 2              CO               US                 2</span></span>
<span><span class="co">#&gt; 3              TX               US                 8</span></span>
<span><span class="co">#&gt; 4              TX               US                 6</span></span>
<span><span class="co">#&gt; 5              WI               US                 1</span></span>
<span><span class="co">#&gt; 6              CA               US                 0</span></span>
<span><span class="co">#&gt; 7              CA               US                 8</span></span>
<span><span class="co">#&gt; 8              TX               US                 6</span></span>
<span><span class="co">#&gt; 9              SC               US                 0</span></span>
<span><span class="co">#&gt; 10             TX               US                 2</span></span>
<span><span class="co">#&gt; 11             TX               US                 2</span></span>
<span><span class="co">#&gt; 12             FL               US                 5</span></span>
<span><span class="co">#&gt; 13             FL               US                 2</span></span>
<span><span class="co">#&gt; 14             FL               US                 5</span></span>
<span><span class="co">#&gt; 15             FL               US                 2</span></span>
<span><span class="co">#&gt; 16             NC               US                 4</span></span>
<span><span class="co">#&gt; 17             NC               US                 2</span></span>
<span><span class="co">#&gt; 18             FL               US                 7</span></span>
<span><span class="co">#&gt; 19             FL               US                 7</span></span>
<span><span class="co">#&gt; 20             NJ               US                 4</span></span>
<span><span class="co">#&gt; 21             NJ               US                 8</span></span>
<span><span class="co">#&gt; 22             NJ               US                11</span></span>
<span><span class="co">#&gt; 23             FL               US                 4</span></span>
<span><span class="co">#&gt; 24             NC               US                 2</span></span>
<span><span class="co">#&gt; 25             NC               US                 1</span></span>
<span><span class="co">#&gt; 26             MI               US                 4</span></span>
<span><span class="co">#&gt; 27             MI               US                 1</span></span>
<span><span class="co">#&gt; 28             MI               US                 2</span></span>
<span><span class="co">#&gt; 29             MA               US                 3</span></span>
<span><span class="co">#&gt; 30             CA               US                 2</span></span>
<span><span class="co">#&gt; 31             MA               US                 3</span></span>
<span><span class="co">#&gt; 32             CA               US                 2</span></span></code></pre></div>
<p>Some rows act as you’d expect, like patent 4078607’s Thomas
Jefferson. In others, two inventors combine to meet the search
cititeria, like 6905071’s <strong>Thomas</strong> Amundsen and Matthew
<strong>Jefferson</strong>. This might be a match we didn’t intend.</p>
<p>Now we’ll hit the inventor endpoint with a similar query, as the
jupyter notebook suggests.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">inventors_query</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/with_qfuns.html">with_qfuns</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">or</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">and</a></span><span class="op">(</span></span>
<span>        <span class="fu">text_phrase</span><span class="op">(</span>inventor_name_first <span class="op">=</span> <span class="st">"George"</span><span class="op">)</span>,</span>
<span>        <span class="fu">text_phrase</span><span class="op">(</span>inventor_name_last <span class="op">=</span> <span class="st">"Washington"</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html" class="external-link">and</a></span><span class="op">(</span></span>
<span>        <span class="fu">text_phrase</span><span class="op">(</span>inventor_name_first <span class="op">=</span> <span class="st">"Thomas"</span><span class="op">)</span>,</span>
<span>        <span class="fu">text_phrase</span><span class="op">(</span>inventor_name_last <span class="op">=</span> <span class="st">"Jefferson"</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">inventor_fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"inventor_id"</span>,<span class="st">"inventor_name_first"</span>,<span class="st">"inventor_name_last"</span><span class="op">)</span></span>
<span><span class="va">inventor_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">inventors_query</span>, fields<span class="op">=</span><span class="va">inventor_fields</span>, endpoint<span class="op">=</span><span class="st">"inventor"</span><span class="op">)</span></span>
<span><span class="va">actual_inventors</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/unnest_pv_data.html">unnest_pv_data</a></span><span class="op">(</span><span class="va">inventor_res</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">actual_inventors</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt;                 inventor_id inventor_name_first    inventor_name_last</span></span>
<span><span class="co">#&gt; 1     fl:ge_ln:washington-1      George Elliott            Washington</span></span>
<span><span class="co">#&gt; 2     fl:ge_ln:washington-2              George            Washington</span></span>
<span><span class="co">#&gt; 3      fl:th_ln:jefferson-1              Thomas             Jefferson</span></span>
<span><span class="co">#&gt; 4 ifajrttz5x29w1n3bk7z8if29              George Fitzgerald Washington</span></span></code></pre></div>
<p>Now, with actual_inventors’ inventor_ids in hand, we’ll ask the
patent endpoint for their patents. The results are quite different than
what the first query returned. (These patents would have names matching
at least one of our two famous forefather’s names. The first query
unintuitively matched names where the first and last name matches did
not necessarily both occur on the same inventor.)</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">id_query</span> <span class="op">&lt;-</span> <span class="va">qry_funs</span><span class="op">$</span><span class="fu">eq</span><span class="op">(</span>inventors.inventor_id<span class="op">=</span><span class="va">actual_inventors</span><span class="op">$</span><span class="va">inventors</span><span class="op">$</span><span class="va">inventor_id</span><span class="op">)</span></span>
<span></span>
<span><span class="va">patent_fields</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"patent_id"</span>, <span class="st">"inventors.inventor_name_first"</span>, <span class="st">"inventors.inventor_name_last"</span>,</span>
<span>  <span class="st">"inventors.inventor_id"</span><span class="op">)</span></span>
<span><span class="va">pat_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_pv.html">search_pv</a></span><span class="op">(</span><span class="va">id_query</span>, fields<span class="op">=</span><span class="va">patent_fields</span>, sort<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>patent_id <span class="op">=</span> <span class="st">"asc"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/unnest_pv_data.html">unnest_pv_data</a></span><span class="op">(</span><span class="va">pat_res</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># we'll apply a similar name filter like we did on the first query's results</span></span>
<span><span class="co"># we requested inventors.inventor_id but we also get back inventor, a HATEOAS link we don't need</span></span>
<span><span class="va">display_inventors</span> <span class="op">&lt;-</span> </span>
<span>   <span class="va">dl</span><span class="op">$</span><span class="va">inventors</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^(George|Thomas)"</span>, <span class="va">inventor_name_first</span> <span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^(Washington|Jefferson)"</span>, <span class="va">inventor_name_last</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">inventor</span><span class="op">)</span></span>
<span></span>
<span><span class="va">display_inventors</span></span>
<span><span class="co">#&gt;    patent_id               inventor_id inventor_name_first</span></span>
<span><span class="co">#&gt; 1   10568228     fl:ge_ln:washington-1      George Elliott</span></span>
<span><span class="co">#&gt; 2   12263952 ifajrttz5x29w1n3bk7z8if29              George</span></span>
<span><span class="co">#&gt; 3    4078607      fl:th_ln:jefferson-1              Thomas</span></span>
<span><span class="co">#&gt; 4    4104193      fl:th_ln:jefferson-1              Thomas</span></span>
<span><span class="co">#&gt; 5    5643452     fl:ge_ln:washington-2              George</span></span>
<span><span class="co">#&gt; 6    5645778     fl:ge_ln:washington-2              George</span></span>
<span><span class="co">#&gt; 7    5736046     fl:ge_ln:washington-2              George</span></span>
<span><span class="co">#&gt; 8    5897817     fl:ge_ln:washington-2              George</span></span>
<span><span class="co">#&gt; 9    6218441     fl:ge_ln:washington-2              George</span></span>
<span><span class="co">#&gt; 10   6881337     fl:ge_ln:washington-2              George</span></span>
<span><span class="co">#&gt; 11   7144505     fl:ge_ln:washington-2              George</span></span>
<span><span class="co">#&gt;       inventor_name_last inventor_gender_code</span></span>
<span><span class="co">#&gt; 1             Washington                    M</span></span>
<span><span class="co">#&gt; 2  Fitzgerald Washington                    M</span></span>
<span><span class="co">#&gt; 3              Jefferson                    M</span></span>
<span><span class="co">#&gt; 4              Jefferson                    M</span></span>
<span><span class="co">#&gt; 5             Washington                    M</span></span>
<span><span class="co">#&gt; 6             Washington                    M</span></span>
<span><span class="co">#&gt; 7             Washington                    M</span></span>
<span><span class="co">#&gt; 8             Washington                    M</span></span>
<span><span class="co">#&gt; 9             Washington                    M</span></span>
<span><span class="co">#&gt; 10            Washington                    M</span></span>
<span><span class="co">#&gt; 11            Washington                    M</span></span>
<span><span class="co">#&gt;                    inventor_location_id inventor_city inventor_state</span></span>
<span><span class="co">#&gt; 1  ea0f11fa-16c7-11ed-9b5f-1234bde3cd05     Oak Creek             WI</span></span>
<span><span class="co">#&gt; 2  ebd2597d-16c7-11ed-9b5f-1234bde3cd05    Blythewood             SC</span></span>
<span><span class="co">#&gt; 3  4e49a0a0-16c8-11ed-9b5f-1234bde3cd05       Houston             TX</span></span>
<span><span class="co">#&gt; 4  4e49a0a0-16c8-11ed-9b5f-1234bde3cd05       Houston             TX</span></span>
<span><span class="co">#&gt; 5  f4141084-16c7-11ed-9b5f-1234bde3cd05         Miami             FL</span></span>
<span><span class="co">#&gt; 6  ec3c5775-16c7-11ed-9b5f-1234bde3cd05       Miramar             FL</span></span>
<span><span class="co">#&gt; 7  f4141084-16c7-11ed-9b5f-1234bde3cd05         Miami             FL</span></span>
<span><span class="co">#&gt; 8  ec3c5775-16c7-11ed-9b5f-1234bde3cd05       Miramar             FL</span></span>
<span><span class="co">#&gt; 9  ec3c5775-16c7-11ed-9b5f-1234bde3cd05       Miramar             FL</span></span>
<span><span class="co">#&gt; 10 ec3c5775-16c7-11ed-9b5f-1234bde3cd05       Miramar             FL</span></span>
<span><span class="co">#&gt; 11 ec3c5775-16c7-11ed-9b5f-1234bde3cd05       Miramar             FL</span></span>
<span><span class="co">#&gt;    inventor_country inventor_sequence</span></span>
<span><span class="co">#&gt; 1                US                 1</span></span>
<span><span class="co">#&gt; 2                US                 0</span></span>
<span><span class="co">#&gt; 3                US                 2</span></span>
<span><span class="co">#&gt; 4                US                 2</span></span>
<span><span class="co">#&gt; 5                US                 5</span></span>
<span><span class="co">#&gt; 6                US                 2</span></span>
<span><span class="co">#&gt; 7                US                 5</span></span>
<span><span class="co">#&gt; 8                US                 2</span></span>
<span><span class="co">#&gt; 9                US                 7</span></span>
<span><span class="co">#&gt; 10               US                 7</span></span>
<span><span class="co">#&gt; 11               US                 4</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="acknowledgment">Acknowledgment<a class="anchor" aria-label="anchor" href="#acknowledgment"></a>
</h2>
<p>Again, credit goes to the Patentsview API team for creating the cited
jupyter notebook. This is just portions of it in R package form. The
repo doesn’t have a stated license but when I checked, I was told:</p>
<blockquote>
<p>For the repo license we are looking at the <a href="https://www.gnu.org/licenses/quick-guide-gplv3.html" class="external-link">GNU General
Public License v3</a> (GPL3).</p>
</blockquote>
<p>That is the same license as R itself so I don’t think we’ve violated
anything. For extra fun check out <a href="https://github.com/mustberuss/PatentsView-Code-Snippets/blob/master/07_PatentSearch_API_demo/PV%20PatentSearch%20API%20tutorial.ipynb" class="external-link">Russ’
fork</a> where there’s python code for retrieving Mr. Jefferson’s
patents etc. There was no reply when we asked if they’d be receptive to
a PR.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Baker, Russ Allen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
