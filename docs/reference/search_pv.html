<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Search PatentsView — search_pv • patentsview</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Search PatentsView — search_pv"><meta name="description" content="This makes an HTTP request to the PatentsView API for data matching the
user's query."><meta property="og:description" content="This makes an HTTP request to the PatentsView API for data matching the
user's query."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">patentsview</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-api-changes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-flag"></span> API Changes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-api-changes"><li><a class="dropdown-item" href="../articles/api-changes.html"><span class="fa fa-exclamation"></span> 2025 API Changes</a></li>
    <li><a class="dropdown-item" href="../articles/converting-an-existing-script.html"><span class="fa fa-sync"></span> Converting an Existing Script</a></li>
    <li><a class="dropdown-item" href="../articles/result-set-paging.html"><span class="fa fa-book"></span> Result Set Paging</a></li>
    <li><a class="dropdown-item" href="../articles/understanding-the-api.html"><span class="fa fa-school"></span> Understanding the API</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../articles/getting-started.html"><span class="fa fa-play"></span> Getting started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/writing-queries.html"><span class="fa fa-pencil"></span> Writing queries</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-applications" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-bar-chart"></span> Applications</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-applications"><li><a class="dropdown-item" href="../articles/examples.html"><span class="fa fa-code"></span> Examples</a></li>
    <li><a class="dropdown-item" href="../articles/top-assignees.html"><span class="fa fa-university"></span> Top assignees</a></li>
    <li><a class="dropdown-item" href="../articles/citation-networks.html"><span class="fa fa-long-arrow-left"></span> Citation networks</a></li>
    <li><a class="dropdown-item" href="../articles/ropensci-blog-post.html"><span class="fa fa-bullhorn"></span> ropensci announcement</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/patentsview/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Search PatentsView</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/patentsview/blob/HEAD/R/search-pv.R" class="external-link"><code>R/search-pv.R</code></a></small>
      <div class="d-none name"><code>search_pv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This makes an HTTP request to the PatentsView API for data matching the
user's query.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">search_pv</span><span class="op">(</span></span>
<span>  <span class="va">query</span>,</span>
<span>  fields <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  endpoint <span class="op">=</span> <span class="st">"patent"</span>,</span>
<span>  subent_cnts <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  mtchd_subent_only <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  page <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  per_page <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  after <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  all_pages <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sort <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"GET"</span>,</span>
<span>  error_browser <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  exclude_withdrawn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  api_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"PATENTSVIEW_API_KEY"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-query">query<a class="anchor" aria-label="anchor" href="#arg-query"></a></dt>
<dd><p>The query that the API will use to filter records. <code>query</code>
can come in any one of the following forms:</p><ul><li><p>A character string with valid JSON. <br>
E.g., <code>'{"_gte":{"patent_date":"2007-01-04"}}'</code></p></li>
<li><p>A list which will be converted to JSON by <code>search_pv</code>. <br>
E.g., <code>list("_gte" = list("patent_date" = "2007-01-04"))</code></p></li>
<li><p>An object of class <code>pv_query</code>, which you create by calling one
of the functions found in the <code><a href="qry_funs.html">qry_funs</a></code> list...See the
<a href="../articles/writing-queries.html">writing
queries vignette</a> for details.<br>
E.g., <code>qry_funs$gte(patent_date = "2007-01-04")</code></p></li>
</ul></dd>


<dt id="arg-fields">fields<a class="anchor" aria-label="anchor" href="#arg-fields"></a></dt>
<dd><p>A character vector of the fields that you want returned to you.
A value of <code>NULL</code> indicates to the API that it should return the default fields
for that endpoint. Acceptable fields for a given endpoint can be found in
the <code>fieldsdf</code> data frame (<code>View(fieldsdf)</code>) or by using
<code><a href="get_fields.html">get_fields</a></code>. Nested fields can be fully qualified, e.g.,
"application.filing_date" or you can use the group name that the field
belongs to if you want all of the nested fields for that group.</p>
<p>Note: The primary key columns for a given endpoint will be appended to your
list of fields within <code>search_pv</code>. You can see the <code><a href="get_ok_pk.html">get_ok_pk</a></code>
to determine what those columns will be for a given endpoint.</p>
<p>Note: If you specify all fields in a given group using their full qualified
names, the group name will be substituted in the HTTTP request. This helps
make HTTP requests shorter. This substitution will not happen when you specify
all of the primary-entity fields (e.g., passing
<code>get_fields("patent", "patents")</code> into <code>search_pv</code> would not
substitute use the group name "patents" in place of all of the fields).</p></dd>


<dt id="arg-endpoint">endpoint<a class="anchor" aria-label="anchor" href="#arg-endpoint"></a></dt>
<dd><p>The web service resource you wish to search. Use
<code><a href="get_endpoints.html">get_endpoints()</a></code> to list the available endpoints.</p></dd>


<dt id="arg-subent-cnts">subent_cnts<a class="anchor" aria-label="anchor" href="#arg-subent-cnts"></a></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> This is always FALSE in the
new version of the API as the total counts of unique subentities is no longer available.</p></dd>


<dt id="arg-mtchd-subent-only">mtchd_subent_only<a class="anchor" aria-label="anchor" href="#arg-mtchd-subent-only"></a></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> This is always
FALSE in the new version of the API as non-matched subentities
will always be returned.</p></dd>


<dt id="arg-page">page<a class="anchor" aria-label="anchor" href="#arg-page"></a></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> The new version of the API does not use
<code>page</code> as a parameter for paging, it uses <code>after</code>.</p></dd>


<dt id="arg-per-page">per_page<a class="anchor" aria-label="anchor" href="#arg-per-page"></a></dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> The API now uses <code>size</code></p></dd>


<dt id="arg-size">size<a class="anchor" aria-label="anchor" href="#arg-size"></a></dt>
<dd><p>The number of records that should be returned per page. This
value can be as high as 1,000 (e.g., <code>size = 1000</code>).</p></dd>


<dt id="arg-after">after<a class="anchor" aria-label="anchor" href="#arg-after"></a></dt>
<dd><p>A list of sort key values that defaults to NULL.  This
exposes the API's paging parameter for users who want to implement their own
paging. It cannot be set when <code>all_pages = TRUE</code> as the R package manipulates it
for users automatically. See <a href="../articles/result-set-paging.html">result set paging</a></p></dd>


<dt id="arg-all-pages">all_pages<a class="anchor" aria-label="anchor" href="#arg-all-pages"></a></dt>
<dd><p>Do you want to download all possible pages of output? If
<code>all_pages = TRUE</code>, the value of <code>size</code> is ignored.</p></dd>


<dt id="arg-sort">sort<a class="anchor" aria-label="anchor" href="#arg-sort"></a></dt>
<dd><p>A named character vector where the name indicates the field to
sort by and the value indicates the direction of sorting (direction should
be either "asc" or "desc"). For example, <code>sort = c("patent_id" =
 "asc")</code> or <br><code>sort = c("patent_id" = "asc", "patent_date" =
 "desc")</code>. <code>sort = NULL</code> (the default) means the API will use the default
sort column for your given endpoint.
You must include any fields that you wish to sort by in <code>fields</code>.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>The HTTP method that you want to use to send the request.
Possible values include "GET" or "POST". Use the POST method when
your query is very long (say, over 2,000 characters in length).</p></dd>


<dt id="arg-error-browser">error_browser<a class="anchor" aria-label="anchor" href="#arg-error-browser"></a></dt>
<dd><p>`r lifecycle::badge("deprecated"</p></dd>


<dt id="arg-exclude-withdrawn">exclude_withdrawn<a class="anchor" aria-label="anchor" href="#arg-exclude-withdrawn"></a></dt>
<dd><p>only used by the patent endpoint, if FALSE withdrawn patents
in the database can be returned by a query.  The API defaults this to TRUE, not
returning withdrawn patents in the database that met the query parameter.</p></dd>


<dt id="arg-api-key">api_key<a class="anchor" aria-label="anchor" href="#arg-api-key"></a></dt>
<dd><p>API key, it defaults to Sys.getenv("PATENTSVIEW_API_KEY"). Request a key
<a href="https://patentsview-support.atlassian.net/servicedesk/customer/portals" class="external-link">here</a>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Curl options passed along to httr2's <code><a href="https://httr2.r-lib.org/reference/req_options.html" class="external-link">req_options</a></code>
when we do GETs or POSTs.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with the following three elements:</p><dl><dt>data</dt>
<dd><p>A list with one element - a named data frame containing the
data returned by the server. Each row in the data frame corresponds to a
single value for the primary entity, as defined by the endpoint's primary key.
For example, if you search the assignee endpoint, then the data frame
will be on the assignee-level, where each row corresponds to a single
assignee (primary key would be <code>assignee_id</code>). Fields that are not on
the assignee-level would be returned in list columns.</p></dd>


<dt>query_results</dt>
<dd><p>Entity counts across all pages of output (not just
the page returned to you).</p></dd>


<dt>request</dt>
<dd><p>Details of the HTTP request that was sent to the server.
When you set <code>all_pages = TRUE</code>, you will only get a sample request.
In other words, you will not be given multiple requests for the multiple
calls that were made to the server (one for each page of results).</p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">search_pv</span><span class="op">(</span>query <span class="op">=</span> <span class="st">'{"_gt":{"patent_year":2010}}'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">search_pv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  query <span class="op">=</span> <span class="va">qry_funs</span><span class="op">$</span><span class="fu">gt</span><span class="op">(</span>patent_year <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fields <span class="op">=</span> <span class="fu"><a href="get_fields.html">get_fields</a></span><span class="op">(</span><span class="st">"patent"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"patents"</span>, <span class="st">"assignees"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">search_pv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  query <span class="op">=</span> <span class="va">qry_funs</span><span class="op">$</span><span class="fu">gt</span><span class="op">(</span>patent_year <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"POST"</span>,</span></span>
<span class="r-in"><span>  fields <span class="op">=</span> <span class="st">"patent_id"</span>,</span></span>
<span class="r-in"><span>  sort <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"patent_id"</span> <span class="op">=</span> <span class="st">"asc"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">search_pv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  query <span class="op">=</span> <span class="va">qry_funs</span><span class="op">$</span><span class="fu">eq</span><span class="op">(</span>inventor_name_last <span class="op">=</span> <span class="st">"Crew"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  endpoint <span class="op">=</span> <span class="st">"inventor"</span>,</span></span>
<span class="r-in"><span>  all_pages <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">search_pv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  query <span class="op">=</span> <span class="va">qry_funs</span><span class="op">$</span><span class="fu">contains</span><span class="op">(</span>assignee_individual_name_last <span class="op">=</span> <span class="st">"Smith"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  endpoint <span class="op">=</span> <span class="st">"assignee"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">search_pv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  query <span class="op">=</span> <span class="va">qry_funs</span><span class="op">$</span><span class="fu">contains</span><span class="op">(</span>inventors.inventor_name_last <span class="op">=</span> <span class="st">"Smith"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  endpoint <span class="op">=</span> <span class="st">"patent"</span>,</span></span>
<span class="r-in"><span>  timeout <span class="op">=</span> <span class="fl">40</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">search_pv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  query <span class="op">=</span> <span class="va">qry_funs</span><span class="op">$</span><span class="fu">eq</span><span class="op">(</span>patent_id <span class="op">=</span> <span class="st">"11530080"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fields <span class="op">=</span> <span class="st">"application"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">search_pv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  query <span class="op">=</span> <span class="va">qry_funs</span><span class="op">$</span><span class="fu">eq</span><span class="op">(</span>patent_id <span class="op">=</span> <span class="st">"9494444"</span><span class="op">)</span>,  <span class="co"># a withdrawn patent in the pview dbs</span></span></span>
<span class="r-in"><span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"patent_id"</span>, <span class="st">"patent_date"</span>, <span class="st">"withdrawn"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  exclude_withdrawn <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">search_pv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  query <span class="op">=</span> <span class="va">qry_funs</span><span class="op">$</span><span class="fu">eq</span><span class="op">(</span>withdrawn <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"patent_id"</span>, <span class="st">"patent_date"</span>, <span class="st">"withdrawn"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  exclude_withdrawn <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Baker, Russ Allen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

